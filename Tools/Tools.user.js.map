{"version":3,"sources":["Tools.user.ts"],"sourcesContent":["// ==UserScript==\r\n// @name         Tools\r\n// @namespace    Paul-16098\r\n// @description  paul Tools\r\n// @version      2.2.14.0\r\n// @match        *://*/*\r\n// @author       paul\r\n// @license      MIT\r\n// @grant        GM_getValue\r\n// @run-at       document-start\r\n// @grant        unsafeWindow\r\n// @supportURL   https://github.com/Paul-16098/vs_code/issues/\r\n// @homepageURL  https://github.com/Paul-16098/vs_code/blob/main/js/userjs/README.md\r\n// @downloadURL  https://github.com/Paul-16098/vs_code/raw/main/js/userjs/Tools.user.js\r\n// @updateURL    https://github.com/Paul-16098/vs_code/raw/main/js/userjs/Tools.user.js\r\n// ==/UserScript==\r\n\r\n// 避免重複宣告 _unsafeWindow\r\nconst _unsafeWindow = unsafeWindow ?? window;\r\n\r\nconst IS_DEBUG_LOG: boolean = GM_getValue(\"IS_DEBUG_LOG\", false);\r\n\r\n/**\r\n * 初始化 GM API 代理，兼容不同腳本管理器環境。\r\n * 會自動偵測可用的 GM_* API，並設置對應的變數。\r\n * 若無法取得則提供降級方案。\r\n */\r\nfunction setGM() {\r\n  let debug = console.debug;\r\n  {\r\n    // 初始化 GM API 相關的方法和信息\r\n    var _GM_xmlhttpRequest: Function,\r\n      _GM_registerMenuCommand: Function,\r\n      _GM_notification: Function,\r\n      _GM_addStyle: Function,\r\n      _GM_openInTab: Function,\r\n      _GM_info: object,\r\n      _GM_setClipboard: Function;\r\n    {\r\n      // 處理 GM_xmlhttpRequest\r\n      if (typeof GM_xmlhttpRequest !== \"undefined\") {\r\n        _GM_xmlhttpRequest = GM_xmlhttpRequest;\r\n      } else if (\r\n        typeof GM !== \"undefined\" &&\r\n        typeof GM.xmlHttpRequest !== \"undefined\"\r\n      ) {\r\n        _GM_xmlhttpRequest = GM.xmlHttpRequest;\r\n      } else {\r\n        _GM_xmlhttpRequest = (f: {\r\n          url: string | URL | Request;\r\n          method: any;\r\n          data: any;\r\n          headers: any;\r\n          onload: (arg0: { response: string }) => any;\r\n          onerror: () => any;\r\n        }) => {\r\n          fetch(f.url, {\r\n            method: f.method || \"GET\",\r\n            body: f.data,\r\n            headers: f.headers,\r\n          })\r\n            .then((response) => response.text())\r\n            .then((data) => {\r\n              f.onload && f.onload({ response: data });\r\n            })\r\n            .catch(f.onerror && f.onerror());\r\n        };\r\n      }\r\n    }\r\n    {\r\n      // 處理 GM_registerMenuCommand\r\n      if (typeof GM_registerMenuCommand !== \"undefined\") {\r\n        _GM_registerMenuCommand = GM_registerMenuCommand;\r\n      } else if (\r\n        typeof GM !== \"undefined\" &&\r\n        typeof GM.registerMenuCommand !== \"undefined\"\r\n      ) {\r\n        _GM_registerMenuCommand = GM.registerMenuCommand;\r\n      } else {\r\n        _GM_registerMenuCommand = (s: any, f: any) => {\r\n          debug(s);\r\n          debug(f);\r\n        };\r\n      }\r\n    }\r\n    {\r\n      // 處理 GM_info\r\n      if (typeof GM_info !== \"undefined\") {\r\n        _GM_info = GM_info;\r\n      } else if (typeof GM !== \"undefined\" && typeof GM.info !== \"undefined\") {\r\n        _GM_info = GM.info;\r\n      } else {\r\n        _GM_info = { script: {} };\r\n      }\r\n    }\r\n    {\r\n      // 處理 GM_notification\r\n      if (typeof GM_notification !== \"undefined\") {\r\n        _GM_notification = GM_notification;\r\n      } else if (\r\n        typeof GM !== \"undefined\" &&\r\n        typeof GM.notification !== \"undefined\"\r\n      ) {\r\n        _GM_notification = GM.notification;\r\n      } else {\r\n        _GM_notification = (s: { text: any }) => {\r\n          alert(\"_GM_notification: \" + String(s.text || s));\r\n        };\r\n      }\r\n    }\r\n    {\r\n      // 處理 GM_openInTab\r\n      if (typeof GM_openInTab !== \"undefined\") {\r\n        _GM_openInTab = GM_openInTab;\r\n      } else if (\r\n        typeof GM !== \"undefined\" &&\r\n        typeof GM.openInTab !== \"undefined\"\r\n      ) {\r\n        _GM_openInTab = GM.openInTab;\r\n      } else {\r\n        _GM_openInTab = (s: string | URL | undefined, t: any) => {\r\n          window.open(s);\r\n          debug(t);\r\n        };\r\n      }\r\n    }\r\n    {\r\n      // 處理 GM_addStyle\r\n      if (typeof GM_addStyle !== \"undefined\") {\r\n        _GM_addStyle = GM_addStyle;\r\n      } else if (\r\n        typeof GM !== \"undefined\" &&\r\n        typeof GM.addStyle !== \"undefined\"\r\n      ) {\r\n        _GM_addStyle = GM.addStyle;\r\n      } else {\r\n        _GM_addStyle = (CssStr: string) => {\r\n          let styleEle = document.createElement(\"style\");\r\n          styleEle.classList.add(\"_GM_addStyle\");\r\n          styleEle.innerHTML = CssStr;\r\n          document.head.appendChild(styleEle);\r\n          return styleEle;\r\n        };\r\n      }\r\n    }\r\n    {\r\n      // 處理 GM_setClipboard\r\n      if (typeof GM_setClipboard !== \"undefined\") {\r\n        _GM_setClipboard = GM_setClipboard;\r\n      } else if (\r\n        typeof GM !== \"undefined\" &&\r\n        typeof GM.setClipboard !== \"undefined\"\r\n      ) {\r\n        _GM_setClipboard = GM.setClipboard;\r\n      } else {\r\n        _GM_setClipboard = (s: any, i: any) => {\r\n          debug(s);\r\n          debug(i);\r\n        };\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 從 DOM 中移除指定選擇器的所有元素。\r\n * @param args - CSS 選擇器字串陣列\r\n * @returns [true, args] 或 [false, args, error]\r\n */\r\nfunction removeElement(...args: Array<string>) {\r\n  try {\r\n    if (args) {\r\n      args.forEach((args) => {\r\n        if (IS_DEBUG_LOG) {\r\n          console.log(\"args: \", args);\r\n          console.log(\r\n            \"document.querySelectorAll(args): \",\r\n            document.querySelectorAll(args)\r\n          );\r\n        }\r\n        if (document.querySelectorAll(args).length !== 0) {\r\n          document.querySelectorAll(args).forEach((ele) => {\r\n            ele.remove();\r\n          });\r\n        } else {\r\n          console.debug(args, \"is not a Html Element.\");\r\n        }\r\n      });\r\n    }\r\n  } catch (e) {\r\n    console.error(e);\r\n    return [false, args, e];\r\n  }\r\n  return [true, args];\r\n}\r\n\r\ntype setMenuFn = (ev?: MouseEvent | KeyboardEvent) => void;\r\n/**\r\n * 註冊一個用戶菜單命令，支援布林值自動切換與自定義顯示。\r\n *\r\n * @param name - 設定名稱（同時作為 GM 存儲 key）\r\n * @param fn - (可選) 點擊時執行的函數，若為布林值預設為切換並重載\r\n * @param def - (可選) 預設值\r\n * @param showMapping - (可選) 顯示映射表\r\n * @returns 菜單命令ID\r\n *\r\n * @remarks\r\n * - 如果值為 `name` 是未定義的，且提供了 `def`，則將 `def` 設置為初始值。\r\n * - 對於布林值，菜單會顯示切換選項，並在變更時重新加載頁面。\r\n * - 對於不支持的類型，當選擇菜單項時會記錄錯誤。\r\n */\r\nfunction setMenu(\r\n  name: string,\r\n  fn?: setMenuFn,\r\n  def?: any,\r\n  showMapping?: { [x: string]: string } | undefined\r\n): number {\r\n  // 顯示值的映射\r\n  const trueShowMapping: { [x: string]: string } = {\r\n    true: \"開\",\r\n    false: \"關\",\r\n    ...(showMapping ?? {}),\r\n  };\r\n  let support = false;\r\n  let showName: string = trueShowMapping[name] ?? name.replaceAll(\"_\", \" \");\r\n  let getValue: any = GM_getValue(name);\r\n  let showValue: string = \"No support\";\r\n  if (getValue === undefined && def !== undefined) {\r\n    // 如果沒有值，則使用默認值\r\n    GM_setValue(name, def);\r\n    getValue = def;\r\n    console.debug(`setMenu: ${name} set default value: ${def}`);\r\n  }\r\n  if (typeof getValue === \"boolean\") {\r\n    support = true;\r\n    showValue = getValue.toString();\r\n  }\r\n  showValue = trueShowMapping[getValue] ?? showValue;\r\n\r\n  const trueFn =\r\n    fn ??\r\n    (support\r\n      ? function (ev: MouseEvent | KeyboardEvent) {\r\n          if (typeof getValue === \"boolean\") {\r\n            GM_setValue(name, !getValue);\r\n            window.location.reload();\r\n          }\r\n        }\r\n      : () => {\r\n          let t = \"the type is not supported: \" + typeof getValue;\r\n          // alert(t);\r\n          console.error(t);\r\n        });\r\n\r\n  return GM_registerMenuCommand(`${showName}: ${showValue}`, trueFn);\r\n}\r\n\r\n/**\r\n * 安全執行傳入的字串代碼，支援黑名單過濾。\r\n * @param stringCode - 要執行的代碼\r\n * @param safety - 是否啟用安全過濾\r\n * @returns 執行結果\r\n * @throws 若包含黑名單關鍵字則丟出錯誤\r\n */\r\nfunction newEval(stringCode: string, safety: boolean = true) {\r\n  // 檢查是否包含不允許的關鍵字或代碼\r\n  const blackList: Array<string | RegExp> = [\r\n    \"eval\", // 防止執行惡意代碼\r\n    \"function\", // 防止構造新的函數對象\r\n    \"let\",\r\n    \"var\", // 防止變量聲明\r\n    \"document\", // 防止 DOM 操作\r\n    \"alert\", // 防止彈窗\r\n    \"navigator\", // 防止獲取瀏覽器相關信息\r\n    \"localStorage\",\r\n    \"sessionStorage\", // 防止訪問瀏覽器的存儲\r\n    \"console\", // 防止使用 console.log 或其他控制枱方法\r\n    \"XMLHttpRequest\",\r\n    \"fetch\", // 防止發起網絡請求\r\n    \"import\",\r\n    \"export\", // 防止模塊導入和導出\r\n    \"async\",\r\n    \"await\", // 防止定義異步函數\r\n    \"with\", // 防止使用 with 語句\r\n    \"Promise\", // 防止使用 Promise，可能導致複雜的異步操作\r\n    /window\\.[0-9a-zA-Z_]+ *=/, // 檢查對 window 對象的屬性賦值\r\n  ];\r\n  if (safety) {\r\n    // 遍歷不允許的字元或代碼列表\r\n    for (const value of blackList) {\r\n      if (typeof value === \"string\") {\r\n        if (stringCode.includes(value)) {\r\n          throw new Error(\r\n            `不允許的關鍵字或代碼: ${JSON.stringify(\r\n              value\r\n            )},在代碼: ${stringCode}`\r\n          );\r\n        }\r\n      } else if (value instanceof RegExp) {\r\n        if (value.test(stringCode)) {\r\n          throw new Error(\r\n            `不允許的關鍵字或代碼: ${value},在代碼: ${stringCode}`\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // 返回執行傳入字符串代碼的結果\r\n  return new Function(`${safety ? \"return\" : \"\"} ${stringCode}`)();\r\n}\r\n\r\n// #region i18n\r\n\r\n/**\r\n * 多語系(i18n)工具類，支援多語言字典與動態參數替換。\r\n */\r\nclass i18n {\r\n  /** 語言字典資料 */\r\n  public langJson: {\r\n    [lang: string]: {\r\n      [key: string]: string;\r\n    };\r\n  };\r\n  /** 語言優先順序列表 */\r\n  langList: Array<string> = [];\r\n\r\n  /**\r\n   * 建構子\r\n   * @param langJson - 語言字典\r\n   * @param lang - 語言代碼或語言代碼陣列\r\n   */\r\n  constructor(langJson: typeof this.langJson, lang: string | Array<string>) {\r\n    // 構造函數，接受語言和語言映射\r\n    this.langJson = langJson;\r\n    if (lang instanceof Array) {\r\n      // 如果傳入的是數組\r\n      this.langList.push(...lang);\r\n    } else if (typeof lang === \"string\") {\r\n      // 如果傳入的是單個語言\r\n      this.langList.push(lang);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 取得本地化字串，支援參數替換。\r\n   * @param key - 字典鍵值\r\n   * @param args - 參數\r\n   * @returns 對應語言的字串，若無則回傳key\r\n   */\r\n  public get(\r\n    key: keyof (typeof this.langJson)[keyof typeof this.langJson],\r\n    ...args: Array<any>\r\n  ): string {\r\n    for (const lang of this.langList) {\r\n      // 遍歷語言列表\r\n      if (this.langJson[lang] && this.langJson[lang][key]) {\r\n        // 檢查語言映射中是否存在該鍵\r\n        let text = this.langJson[lang][key]; // 獲取對應的語言文本\r\n        if (args && args.length > 0) {\r\n          // 如果傳入了參數\r\n          text = text.replace(/{(\\d+)}/g, (match, number) => {\r\n            if (number >= 0 && number < args.length) {\r\n              // 替換文本中的 {n} 參數\r\n              return typeof args[number] === \"undefined\" ? match : args[number];\r\n            }\r\n            return match;\r\n          });\r\n        }\r\n        return text;\r\n      }\r\n    }\r\n    console.warn(`Translation missing for key: \"${key}\"`); // 警告缺少的翻譯\r\n    return String(key); // 如果沒有找到對應的翻譯，返回key本身\r\n  }\r\n  /**\r\n   * 別名，等同 get\r\n   */\r\n  public t = this.get;\r\n}\r\n// #endregion i18n\r\n"],"names":["_unsafeWindow","unsafeWindow","window","IS_DEBUG_LOG","GM_getValue","setGM","debug","console","_GM_xmlhttpRequest","_GM_registerMenuCommand","_GM_notification","_GM_addStyle","_GM_openInTab","_GM_info","_GM_setClipboard","GM_xmlhttpRequest","GM","xmlHttpRequest","f","fetch","url","method","body","data","headers","then","response","text","onload","catch","onerror","GM_registerMenuCommand","registerMenuCommand","s","GM_info","info","script","GM_notification","notification","alert","String","GM_openInTab","openInTab","t","open","GM_addStyle","addStyle","CssStr","styleEle","document","createElement","classList","add","innerHTML","head","appendChild","GM_setClipboard","setClipboard","i","removeElement","args","forEach","log","querySelectorAll","length","ele","remove","e","error","setMenu","name","fn","def","showMapping","trueShowMapping","true","false","support","showName","replaceAll","getValue","showValue","undefined","GM_setValue","toString","trueFn","ev","location","reload","newEval","stringCode","safety","blackList","value","includes","Error","JSON","stringify","RegExp","test","Function","i18n","langJson","langList","lang","Array","push","get","key","replace","match","number","warn"],"mappings":"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"}