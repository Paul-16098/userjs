{"version":3,"sources":["Tools.user.ts"],"sourcesContent":["// ==UserScript==\n// @name         Tools\n// @namespace    Paul-16098\n// @description  paul Tools\n// @version      2.2.14.0\n// @match        *://*/*\n// @author       paul\n// @license      MIT\n// @grant        GM_getValue\n// @run-at       document-start\n// @grant        unsafeWindow\n// @supportURL   https://github.com/Paul-16098/vs_code/issues/\n// @homepageURL  https://github.com/Paul-16098/vs_code/blob/main/js/userjs/README.md\n// @downloadURL  https://github.com/Paul-16098/vs_code/raw/main/js/userjs/Tools.user.js\n// @updateURL    https://github.com/Paul-16098/vs_code/raw/main/js/userjs/Tools.user.js\n// ==/UserScript==\n\n// 避免重複宣告 _unsafeWindow\nconst _unsafeWindow = unsafeWindow ?? window;\n\nconst IS_DEBUG_LOG: boolean = GM_getValue(\"IS_DEBUG_LOG\", false);\n\n/**\n * 初始化 GM API 代理，兼容不同腳本管理器環境。\n * 會自動偵測可用的 GM_* API，並設置對應的變數。\n * 若無法取得則提供降級方案。\n */\nfunction setGM() {\n  let debug = console.debug;\n  {\n    // 初始化 GM API 相關的方法和信息\n    var _GM_xmlhttpRequest: Function,\n      _GM_registerMenuCommand: Function,\n      _GM_notification: Function,\n      _GM_addStyle: Function,\n      _GM_openInTab: Function,\n      _GM_info: object,\n      _GM_setClipboard: Function;\n    {\n      // 處理 GM_xmlhttpRequest\n      if (typeof GM_xmlhttpRequest !== \"undefined\") {\n        _GM_xmlhttpRequest = GM_xmlhttpRequest;\n      } else if (\n        typeof GM !== \"undefined\" &&\n        typeof GM.xmlHttpRequest !== \"undefined\"\n      ) {\n        _GM_xmlhttpRequest = GM.xmlHttpRequest;\n      } else {\n        _GM_xmlhttpRequest = (f: {\n          url: string | URL | Request;\n          method: any;\n          data: any;\n          headers: any;\n          onload: (arg0: { response: string }) => any;\n          onerror: () => any;\n        }) => {\n          fetch(f.url, {\n            method: f.method || \"GET\",\n            body: f.data,\n            headers: f.headers,\n          })\n            .then((response) => response.text())\n            .then((data) => {\n              f.onload && f.onload({ response: data });\n            })\n            .catch(f.onerror && f.onerror());\n        };\n      }\n    }\n    {\n      // 處理 GM_registerMenuCommand\n      if (typeof GM_registerMenuCommand !== \"undefined\") {\n        _GM_registerMenuCommand = GM_registerMenuCommand;\n      } else if (\n        typeof GM !== \"undefined\" &&\n        typeof GM.registerMenuCommand !== \"undefined\"\n      ) {\n        _GM_registerMenuCommand = GM.registerMenuCommand;\n      } else {\n        _GM_registerMenuCommand = (s: any, f: any) => {\n          debug(s);\n          debug(f);\n        };\n      }\n    }\n    {\n      // 處理 GM_info\n      if (typeof GM_info !== \"undefined\") {\n        _GM_info = GM_info;\n      } else if (typeof GM !== \"undefined\" && typeof GM.info !== \"undefined\") {\n        _GM_info = GM.info;\n      } else {\n        _GM_info = { script: {} };\n      }\n    }\n    {\n      // 處理 GM_notification\n      if (typeof GM_notification !== \"undefined\") {\n        _GM_notification = GM_notification;\n      } else if (\n        typeof GM !== \"undefined\" &&\n        typeof GM.notification !== \"undefined\"\n      ) {\n        _GM_notification = GM.notification;\n      } else {\n        _GM_notification = (s: { text: any }) => {\n          alert(\"_GM_notification: \" + String(s.text || s));\n        };\n      }\n    }\n    {\n      // 處理 GM_openInTab\n      if (typeof GM_openInTab !== \"undefined\") {\n        _GM_openInTab = GM_openInTab;\n      } else if (\n        typeof GM !== \"undefined\" &&\n        typeof GM.openInTab !== \"undefined\"\n      ) {\n        _GM_openInTab = GM.openInTab;\n      } else {\n        _GM_openInTab = (s: string | URL | undefined, t: any) => {\n          window.open(s);\n          debug(t);\n        };\n      }\n    }\n    {\n      // 處理 GM_addStyle\n      if (typeof GM_addStyle !== \"undefined\") {\n        _GM_addStyle = GM_addStyle;\n      } else if (\n        typeof GM !== \"undefined\" &&\n        typeof GM.addStyle !== \"undefined\"\n      ) {\n        _GM_addStyle = GM.addStyle;\n      } else {\n        _GM_addStyle = (CssStr: string) => {\n          let styleEle = document.createElement(\"style\");\n          styleEle.classList.add(\"_GM_addStyle\");\n          styleEle.innerHTML = CssStr;\n          document.head.appendChild(styleEle);\n          return styleEle;\n        };\n      }\n    }\n    {\n      // 處理 GM_setClipboard\n      if (typeof GM_setClipboard !== \"undefined\") {\n        _GM_setClipboard = GM_setClipboard;\n      } else if (\n        typeof GM !== \"undefined\" &&\n        typeof GM.setClipboard !== \"undefined\"\n      ) {\n        _GM_setClipboard = GM.setClipboard;\n      } else {\n        _GM_setClipboard = (s: any, i: any) => {\n          debug(s);\n          debug(i);\n        };\n      }\n    }\n  }\n}\n\n/**\n * 從 DOM 中移除指定選擇器的所有元素。\n * @param args - CSS 選擇器字串陣列\n * @returns [true, args] 或 [false, args, error]\n */\nfunction removeElement(...args: Array<string>) {\n  try {\n    if (args) {\n      args.forEach((args) => {\n        if (IS_DEBUG_LOG) {\n          console.log(\"args: \", args);\n          console.log(\n            \"document.querySelectorAll(args): \",\n            document.querySelectorAll(args)\n          );\n        }\n        if (document.querySelectorAll(args).length !== 0) {\n          document.querySelectorAll(args).forEach((ele) => {\n            ele.remove();\n          });\n        } else {\n          console.debug(args, \"is not a Html Element.\");\n        }\n      });\n    }\n  } catch (e) {\n    console.error(e);\n    return [false, args, e];\n  }\n  return [true, args];\n}\n\ntype setMenuFn = (ev?: MouseEvent | KeyboardEvent) => void;\n/**\n * 註冊一個用戶菜單命令，支援布林值自動切換與自定義顯示。\n *\n * @param name - 設定名稱（同時作為 GM 存儲 key）\n * @param fn - (可選) 點擊時執行的函數，若為布林值預設為切換並重載\n * @param def - (可選) 預設值\n * @param showMapping - (可選) 顯示映射表\n * @returns 菜單命令ID\n *\n * @remarks\n * - 如果值為 `name` 是未定義的，且提供了 `def`，則將 `def` 設置為初始值。\n * - 對於布林值，菜單會顯示切換選項，並在變更時重新加載頁面。\n * - 對於不支持的類型，當選擇菜單項時會記錄錯誤。\n */\nfunction setMenu(\n  name: string,\n  fn?: setMenuFn,\n  def?: any,\n  showMapping?: { [x: string]: string } | undefined\n): number {\n  // 顯示值的映射\n  const trueShowMapping: { [x: string]: string } = {\n    true: \"開\",\n    false: \"關\",\n    ...(showMapping ?? {}),\n  };\n  let support = false;\n  let showName: string = trueShowMapping[name] ?? name.replaceAll(\"_\", \" \");\n  let getValue: any = GM_getValue(name);\n  let showValue: string = \"No support\";\n  if (getValue === undefined && def !== undefined) {\n    // 如果沒有值，則使用默認值\n    GM_setValue(name, def);\n    getValue = def;\n    console.debug(`setMenu: ${name} set default value: ${def}`);\n  }\n  if (typeof getValue === \"boolean\") {\n    support = true;\n    showValue = getValue.toString();\n  }\n  showValue = trueShowMapping[getValue] ?? showValue;\n\n  const trueFn =\n    fn ??\n    (support\n      ? function (ev: MouseEvent | KeyboardEvent) {\n          if (typeof getValue === \"boolean\") {\n            GM_setValue(name, !getValue);\n            window.location.reload();\n          }\n        }\n      : () => {\n          let t = \"the type is not supported: \" + typeof getValue;\n          // alert(t);\n          console.error(t);\n        });\n\n  return GM_registerMenuCommand(`${showName}: ${showValue}`, trueFn);\n}\n\n/**\n * 安全執行傳入的字串代碼，支援黑名單過濾。\n * @param stringCode - 要執行的代碼\n * @param safety - 是否啟用安全過濾\n * @returns 執行結果\n * @throws 若包含黑名單關鍵字則丟出錯誤\n */\nfunction newEval(stringCode: string, safety: boolean = true) {\n  // 檢查是否包含不允許的關鍵字或代碼\n  const blackList: Array<string | RegExp> = [\n    \"eval\", // 防止執行惡意代碼\n    \"function\", // 防止構造新的函數對象\n    \"let\",\n    \"var\", // 防止變量聲明\n    \"document\", // 防止 DOM 操作\n    \"alert\", // 防止彈窗\n    \"navigator\", // 防止獲取瀏覽器相關信息\n    \"localStorage\",\n    \"sessionStorage\", // 防止訪問瀏覽器的存儲\n    \"console\", // 防止使用 console.log 或其他控制枱方法\n    \"XMLHttpRequest\",\n    \"fetch\", // 防止發起網絡請求\n    \"import\",\n    \"export\", // 防止模塊導入和導出\n    \"async\",\n    \"await\", // 防止定義異步函數\n    \"with\", // 防止使用 with 語句\n    \"Promise\", // 防止使用 Promise，可能導致複雜的異步操作\n    /window\\.[0-9a-zA-Z_]+ *=/, // 檢查對 window 對象的屬性賦值\n  ];\n  if (safety) {\n    // 遍歷不允許的字元或代碼列表\n    for (const value of blackList) {\n      if (typeof value === \"string\") {\n        if (stringCode.includes(value)) {\n          throw new Error(\n            `不允許的關鍵字或代碼: ${JSON.stringify(\n              value\n            )},在代碼: ${stringCode}`\n          );\n        }\n      } else if (value instanceof RegExp) {\n        if (value.test(stringCode)) {\n          throw new Error(\n            `不允許的關鍵字或代碼: ${value},在代碼: ${stringCode}`\n          );\n        }\n      }\n    }\n  }\n  // 返回執行傳入字符串代碼的結果\n  return new Function(`${safety ? \"return\" : \"\"} ${stringCode}`)();\n}\n\n// #region i18n\n\n/**\n * 多語系(i18n)工具類，支援多語言字典與動態參數替換。\n */\nclass i18n {\n  /** 語言字典資料 */\n  public langJson: {\n    [lang: string]: {\n      [key: string]: string;\n    };\n  };\n  /** 語言優先順序列表 */\n  langList: Array<string> = [];\n\n  /**\n   * 建構子\n   * @param langJson - 語言字典\n   * @param lang - 語言代碼或語言代碼陣列\n   */\n  constructor(langJson: typeof this.langJson, lang: string | Array<string>) {\n    // 構造函數，接受語言和語言映射\n    this.langJson = langJson;\n    if (lang instanceof Array) {\n      // 如果傳入的是數組\n      this.langList.push(...lang);\n    } else if (typeof lang === \"string\") {\n      // 如果傳入的是單個語言\n      this.langList.push(lang);\n    }\n  }\n\n  /**\n   * 取得本地化字串，支援參數替換。\n   * @param key - 字典鍵值\n   * @param args - 參數\n   * @returns 對應語言的字串，若無則回傳key\n   */\n  public get(\n    key: keyof (typeof this.langJson)[keyof typeof this.langJson],\n    ...args: Array<any>\n  ): string {\n    for (const lang of this.langList) {\n      // 遍歷語言列表\n      if (this.langJson[lang] && this.langJson[lang][key]) {\n        // 檢查語言映射中是否存在該鍵\n        let text = this.langJson[lang][key]; // 獲取對應的語言文本\n        if (args && args.length > 0) {\n          // 如果傳入了參數\n          text = text.replace(/{(\\d+)}/g, (match, number) => {\n            if (number >= 0 && number < args.length) {\n              // 替換文本中的 {n} 參數\n              return typeof args[number] === \"undefined\" ? match : args[number];\n            }\n            return match;\n          });\n        }\n        return text;\n      }\n    }\n    console.warn(`Translation missing for key: \"${key}\"`); // 警告缺少的翻譯\n    return String(key); // 如果沒有找到對應的翻譯，返回key本身\n  }\n  /**\n   * 別名，等同 get\n   */\n  public t = this.get;\n}\n// #endregion i18n\n"],"names":["_unsafeWindow","unsafeWindow","window","IS_DEBUG_LOG","GM_getValue","setGM","debug","console","_GM_xmlhttpRequest","_GM_registerMenuCommand","_GM_notification","_GM_addStyle","_GM_openInTab","_GM_info","_GM_setClipboard","GM_xmlhttpRequest","GM","xmlHttpRequest","f","fetch","url","method","body","data","headers","then","response","text","onload","catch","onerror","GM_registerMenuCommand","registerMenuCommand","s","GM_info","info","script","GM_notification","notification","alert","String","GM_openInTab","openInTab","t","open","GM_addStyle","addStyle","CssStr","styleEle","document","createElement","classList","add","innerHTML","head","appendChild","GM_setClipboard","setClipboard","i","removeElement","args","forEach","log","querySelectorAll","length","ele","remove","e","error","setMenu","name","fn","def","showMapping","trueShowMapping","true","false","support","showName","replaceAll","getValue","showValue","undefined","GM_setValue","toString","trueFn","ev","location","reload","newEval","stringCode","safety","blackList","value","includes","Error","JSON","stringify","RegExp","test","Function","i18n","langJson","langList","lang","Array","push","get","key","replace","match","number","warn"],"mappings":"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"}