{
  "version": 3,
  "sources": ["69shuba auto %E6%9B%B8%E7%B0%BD.user.ts"],
  "sourcesContent": ["/// <reference path = \"./../Tools/Tools.user.d.ts\" />\r\n\r\n// \u8A9E\u8A00\u9078\u9805\u679A\u8209\r\nenum Language {\r\n  en = \"en\",\r\n  zh = \"zh\",\r\n}\r\n\r\n/**\r\n * \u7528\u6236\u914D\u7F6E\u985E\uFF0C\u8CA0\u8CAC\u7BA1\u7406\u8173\u672C\u7684\u5404\u9805\u8A2D\u7F6E\uFF0C\u4E26\u8A3B\u518A\u83DC\u55AE\u3002\r\n */\r\nclass Config {\r\n  /** \u662F\u5426\u958B\u555F\u5075\u932F\u6A21\u5F0F */\r\n  Debug: boolean = GM_getValue(\"Debug\", false);\r\n  /** \u7D50\u675F\u9801\u662F\u5426\u81EA\u52D5\u95DC\u9589 */\r\n  IsEndClose: boolean = GM_getValue(\"IsEndClose\", true);\r\n  /** \u662F\u5426\u81EA\u52D5\u52A0\u5165\u66F8\u6AC3 */\r\n  AutoAddBookcase: boolean = GM_getValue(\"AutoAddBookcase\", true);\r\n  /** \u81EA\u52D5\u52A0\u5165\u66F8\u6AC3\u7684\u5C01\u9396\u540D\u55AE\uFF08\u66F8ID\u9663\u5217\uFF09 */\r\n  AutoAddBookcaseBlockade: Array<string> = GM_getValue(\r\n    \"AutoAddBookcaseBlockade\",\r\n    []\r\n  );\r\n  /** \u662F\u5426\u6514\u622Aalert */\r\n  IsHookAlert: boolean = GM_getValue(\"IsHookAlert\", true);\r\n  /** \u6514\u622Aalert\u7684\u8A0A\u606F\u5C01\u9396\u540D\u55AE */\r\n  HookAlertBlockade: Array<Array<any>> = GM_getValue(\"HookAlertBlockade\", [\r\n    [\"\u6DFB\u52A0\u6210\u529F\"],\r\n    [\"\u522A\u9664\u6210\u529F!\"],\r\n    [\"\u606D\u559C\u60A8\uFF0C\u8BE5\u7AE0\u8282\u5DF2\u7ECF\u52A0\u5165\u5230\u60A8\u7684\u4E66\u7B7E\uFF01\"],\r\n  ]);\r\n  /** \u8A9E\u8A00\u8A2D\u5B9A */\r\n  Language: Language = GM_getValue(\"Language\", Language.zh);\r\n\r\n  constructor() {\r\n    this.set();\r\n    this.registerConfigMenu();\r\n  }\r\n  /**\r\n   * \u8A3B\u518A\u6240\u6709\u914D\u7F6E\u9805\u7684\u83DC\u55AE\r\n   */\r\n  private registerConfigMenu() {\r\n    for (const key in this) {\r\n      const value = this[key as keyof Config];\r\n      let menu = undefined;\r\n      // \u8A9E\u8A00\u5207\u63DB\u83DC\u55AE\r\n      if (Object.values(Language).includes(value as Language)) {\r\n        menu = () => {\r\n          Object.values(Language).forEach((lang) => {\r\n            if (lang !== value) {\r\n              GM_setValue(\"Language\", lang);\r\n              location.reload();\r\n            }\r\n          });\r\n        };\r\n      }\r\n      setMenu(key, menu, value, {\r\n        zh: \"\u4E2D\u6587\",\r\n        en: \"english\",\r\n        Debug: \"\u5075\u932F\",\r\n        AutoAddBookcase: \"\u81EA\u52D5\u6DFB\u52A0\u66F8\u6AC3\",\r\n        AutoAddBookcaseBlockade: \"\u81EA\u52D5\u6DFB\u52A0\u66F8\u6AC3\u5C01\u9396\",\r\n        Language: \"\u8A9E\u8A00\",\r\n        IsEndClose: \"\u7D50\u675F\u5F8C\u95DC\u9589\",\r\n        IsHookAlert: \"\u639B\u9264Alert\",\r\n        HookAlertBlockade: \"\u639B\u9264Alert\u5C01\u9396\",\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * \u5C07\u7576\u524D\u914D\u7F6E\u5BEB\u5165GM\u5B58\u5132\r\n   */\r\n  private set() {\r\n    GM_setValue(\"Debug\", this.Debug);\r\n    GM_setValue(\"IsEndClose\", this.IsEndClose);\r\n    GM_setValue(\"AutoAddBookcase\", this.AutoAddBookcase);\r\n    GM_setValue(\"AutoAddBookcaseBlockade\", this.AutoAddBookcaseBlockade);\r\n    GM_setValue(\"IsHookAlert\", this.IsHookAlert);\r\n    GM_setValue(\"HookAlertBlockade\", this.HookAlertBlockade);\r\n    GM_setValue(\"Language\", this.Language);\r\n  }\r\n}\r\n\r\n// \u914D\u7F6E\u521D\u59CB\u5316\r\nconst config: Config = new Config();\r\n\r\n// i18n \u8A2D\u5B9A\r\nconst i18nData: typeof I18n.prototype.langJson = {\r\n  en: {\r\n    noMatchingPattern: \"No matching URL pattern found\",\r\n    errorOccurred: \"An error occurred: \",\r\n    noLabelsFound: \"No labels found, retrying in 5 seconds...\",\r\n    maxRetriesReached: \"Max retries reached. No labels found.\",\r\n    noUpdates: \"No updates\",\r\n    updatesAvailable: \" updates available\",\r\n  },\r\n  zh: {\r\n    noMatchingPattern: \"\u672A\u627E\u5230\u5339\u914D\u7684 URL \u6A21\u5F0F\",\r\n    errorOccurred: \"\u767C\u751F\u4E86\u4E00\u4E9B\u932F\u8AA4: \",\r\n    noLabelsFound: \"\u672A\u627E\u5230\u6A19\u7C64\uFF0C5 \u79D2\u5F8C\u91CD\u8A66...\",\r\n    maxRetriesReached: \"\u5DF2\u9054\u5230\u6700\u5927\u91CD\u8A66\u6B21\u6578\u3002\u672A\u627E\u5230\u6A19\u7C64\u3002\",\r\n    noUpdates: \"\u6C92\u6709\u66F4\u65B0\",\r\n    updatesAvailable: \"\u500B\u66F4\u65B0\",\r\n  },\r\n};\r\n\r\n// \u66F8\u7C4D\u6578\u64DA\u63A5\u53E3\r\ninterface BookData {\r\n  Updata: {\r\n    url: {\r\n      value: string;\r\n      URLParams: URLSearchParams;\r\n    };\r\n  };\r\n  Mate: {\r\n    BookName: string;\r\n    BookHtmlObj: Element;\r\n    BookImgUrl: string;\r\n  };\r\n}\r\n\r\n/**\r\n * `BookManager` \u985E\u5225\u63D0\u4F9B\u4E86\u5404\u7A2E\u65B9\u6CD5\u4F86\u7BA1\u7406\u7DB2\u9801\u4E0A\u8207\u66F8\u7C4D\u76F8\u95DC\u7684\u8CC7\u6599\u4E26\u8207\u4E4B\u4E92\u52D5\u3002\r\n * \u5B83\u5305\u62EC\u5075\u6E2C\u5716\u66F8\u9801\u9762\u3001\u5716\u66F8\u8CC7\u8A0A\u9801\u9762\u3001\u7D50\u675F\u9801\u9762\u548C\u66F8\u67B6\u9801\u9762\u7684\u529F\u80FD\u3002\r\n * \u5B83\u9084\u63D0\u4F9B\u4E86\u8655\u7406\u5C0E\u822A\u3001\u5C07\u66F8\u7C4D\u6DFB\u52A0\u5230\u66F8\u67B6\u4EE5\u53CA\u4FEE\u6539\u9801\u9762\u5143\u7D20\u7684\u65B9\u6CD5\u3002\r\n *\r\n * @class\r\n * @classdesc \u6B64\u985E\u65E8\u5728\u81EA\u52D5\u5316\u4E26\u589E\u5F37\u8207\u5716\u66F8\u76F8\u95DC\u7684\u7DB2\u7AD9\u7684\u4F7F\u7528\u8005\u9AD4\u9A57\u3002\r\n *\r\n * @property {Object} data -\u5305\u542B\u7528\u65BC\u5075\u6E2C\u548C\u8655\u7406\u66F8\u7C4D\u76F8\u95DC\u9801\u9762\u7684\u5404\u7A2E\u65B9\u6CD5\u548C\u6A21\u5F0F\u3002\r\n * @property {Function} data.HasBookInfo  -\u6AA2\u67E5\u662F\u5426\u53EF\u7528\u66F8\u7C4D\u4FE1\u606F\u3002\r\n * @property {Function} data.IsBookshelf  -\u6AA2\u67E5\u7576\u524D\u9801\u9762\u662F\u5426\u662F\u66F8\u67B6\u9801\u9762\u3002\r\n * @property {Object} data.Book  -\u5305\u542B\u8207\u66F8\u7C4D\u64CD\u4F5C\u6709\u95DC\u7684\u65B9\u6CD5\u3002\r\n * @property {Function} data.Book.GetAid  -\u6AA2\u7D22\u66F8ID\u3002\r\n * @property {Function} data.Book.GetCid  -\u6AA2\u7D22\u7AE0\u7BC0ID\u3002\r\n * @property {RegExp} data.Book.pattern  -\u6A19\u8B58\u66F8\u9801\u7684\u6A21\u5F0F\u3002\r\n * @property {Function} data.Book.Is  -\u6AA2\u67E5\u7576\u524D\u9801\u9762\u662F\u5426\u662F\u66F8\u9801\u3002\r\n * @property {Object} data.Info  -\u5305\u542B\u8207\u66F8\u7C4D\u4FE1\u606F\u64CD\u4F5C\u6709\u95DC\u7684\u65B9\u6CD5\u3002\r\n * @property {RegExp} data.Info.pattern  -\u8B58\u5225\u5716\u66F8\u4FE1\u606F\u9801\u9762\u7684\u6A21\u5F0F\u3002\r\n * @property {Function} data.Info.Is  -\u6AA2\u67E5\u7576\u524D\u9801\u9762\u662F\u5426\u662F\u66F8\u7C4D\u4FE1\u606F\u9801\u9762\u3002\r\n * @property {Object} data.End  -\u5305\u542B\u8207\u6700\u7D42\u9801\u9762\u64CD\u4F5C\u76F8\u95DC\u7684\u65B9\u6CD5\u3002\r\n * @property {Function} data.End.Is  -\u6AA2\u67E5\u7576\u524D\u9801\u9762\u662F\u5426\u662F\u7D50\u675F\u9801\u9762\u3002\r\n * @property {Function} data.GetNextPageUrl  -\u6AA2\u7D22\u4E0B\u4E00\u9801\u7684URL\u3002\r\n * @property {Function} data.IsNextEnd  -\u6AA2\u67E5\u4E0B\u4E00\u9801\u662F\u5426\u662F\u7D42\u9EDE\u9801\u9762\u3002\r\n * @property {Function} data.IsBiz  -\u6AA2\u67E5\u7576\u524D\u57DF\u662F\u5426\u70BA\u201C 69shu.biz\u201D\u3002\r\n *\r\n * @constructor\r\n * @description \u521D\u59CB\u5316 `Bookmanager` \u985E\u7684\u65B0\u5BE6\u4F8B\u3002\u5B83\u8A3B\u518A\u4E86\u914D\u7F6E\u83DC\u55AE\u4E26\u8655\u7406\u4E0D\u540C\u985E\u578B\u7684\u9801\u9762\uFF08\u66F8\u7C4D, \u66F8\u7C4D\u4FE1\u606F, \u7D50\u675F, \u66F8\u67B6\uFF09\u3002\u5982\u679C\u8A2D\u7F6E\u4E86 `config.debug` \u6A19\u8A8C, \u5B83\u9084\u8A18\u9304\u4E86\u8ABF\u8A66\u4FE1\u606F\u3002\r\n * @throws \u5982\u679C\u767C\u751F\u932F\u8AA4\u4E26\u4E14\u672A\u8A2D\u7F6E `config.debug` , \u5C07\u63D0\u9192\u7528\u6237\u3002\r\n *\r\n * @method handleBookPage\r\n * @description \u900F\u904E\u57F7\u884C\u5404\u7A2E\u4FEE\u6539\u548C\u589E\u5F37\u4F86\u8655\u7406\u66F8\u7C4D\u9801\u9762\u3002\r\n * @private\r\n * @returns {void}\r\n *\r\n * @method hookAlert\r\n * @description \u639B\u920E\u5168\u57DF\u300C\u8B66\u5831\u300D\u529F\u80FD\u4EE5\u6709\u689D\u4EF6\u5730\u963B\u6B62\u6216\u8A18\u9304\u8B66\u5831\u8A0A\u606F\u3002\r\n * @private\r\n * @returns {void}\r\n *\r\n * @method addStyles\r\n * @description \u900F\u904E\u5F9E\u6307\u5B9A\u8CC7\u6E90\u6CE8\u5165 CSS \u5167\u5BB9, \u5C07\u81EA\u8A02\u6A23\u5F0F\u65B0\u589E\u81F3\u6587\u4EF6\u3002\r\n * @private\r\n * @returns {void}\r\n *\r\n * @method modifyPageNavigation\r\n * @description \u900F\u904E\u522A\u9664\u73FE\u6709\u7684\u300Conkeydown\u300D\u4E8B\u4EF6\u8655\u7406\u7A0B\u5E8F\u4E26\u65B0\u589E\u65B0\u7684\u300Ckeydown\u300D\u4E8B\u4EF6\u5075\u807D\u5668\u4F86\u4FEE\u6539\u9801\u9762\u5C0E\u822A\u3002\r\n * @private\r\n * @returns {void}\r\n *\r\n * @method keydownHandler\r\n * @description \u8655\u7406\u9375\u76E4\u4E8B\u4EF6, \u4EE5\u4FBF\u5728\u6309\u4E0B\u300C\u5411\u53F3\u7BAD\u982D\u300D\u9375\u6642\u5C0E\u89BD\u81F3\u4E0B\u4E00\u9801\u3002\r\n * @private\r\n * @param {KeyboardEvent} e -\u9375\u76E4\u4E8B\u4EF6\u7269\u4EF6\u3002\r\n * @returns {void}\r\n *\r\n * @method addBookcase\r\n * @description \u5C07\u7576\u524D\u7684\u66F8\u6DFB\u52A0\u5230\u66F8\u67B6\u4E2D\u3002\r\n * @private\r\n * @returns {void}\r\n *\r\n * @method insertAuthorLink\r\n * @description \u63D2\u5165\u4F5C\u8005\u93C8\u63A5\u4E26\u7528\u65B0\u93C8\u63A5\u66FF\u63DB\u6A19\u984CDIV\u3002\r\n * @private\r\n * @returns {void}\r\n *\r\n * @method handleBookshelf\r\n * @description \u901A\u904E\u6536\u96C6\u66F8\u7C4D\u6578\u64DA\u548C\u8A3B\u518A\u83DC\u55AE\u547D\u4EE4\u4F86\u8655\u7406\u66F8\u67B6\u3002\r\n * @private\r\n * @returns {Promise<void>}\r\n *\r\n * @method collectBookData\r\n * @description \u901A\u904E\u4EE5 `book_` \u958B\u982D\u67E5\u8A62ID, \u5F9EDOM\u6536\u96C6\u66F8\u7C4D\u6578\u64DA\u3002\r\n * @private\r\n * @param {number} [retryCount=0]  -\u7576\u524D\u7684\u91CD\u8A66\u8A08\u6578\u3002\r\n * @returns {Promise<BookData[]>}  -\u89E3\u6C7A\u4E00\u7CFB\u5217\u6536\u96C6\u7684\u66F8\u7C4D\u6578\u64DA\u7684\u627F\u8AFE\u3002\r\n *\r\n * @method registerMenuCommand\r\n * @description \u8A3B\u518A\u83DC\u55AE\u547D\u4EE4, \u5176\u4E2D\u5305\u542B\u6536\u96C6\u7684\u66F8\u7C4D\u6578\u64DA\u3002\r\n * @private\r\n * @param {BookData[]} bookData  -\u6536\u96C6\u7684\u66F8\u7C4D\u6578\u64DA\u3002\r\n * @returns {void}\r\n *\r\n * @method debugInfo\r\n * @description \u6536\u96C6\u548C\u8FD4\u56DE\u8ABF\u8A66\u4FE1\u606F\u3002\r\n * @private\r\n * @returns {Object}  -\u8ABF\u8A66\u4FE1\u606F\u3002\r\n *\r\n * @method registerConfigMenu\r\n * @description \u8A3B\u518A\u914D\u7F6E\u83DC\u55AE\u3002\r\n * @private\r\n * @returns {void}\r\n */\r\nclass BookManager {\r\n  /** \u5E38\u7528\u9078\u64C7\u5668\u96C6\u5408 */\r\n  SELECTORS = {\r\n    nextPage: [\r\n      \"body > div.container > div.mybox > div.page1 > a:nth-child(4)\",\r\n      \"body > div.mainbox > div > div.page1 > a:nth-child(4)\",\r\n    ],\r\n    authorInfo:\r\n      \"body > div.container > div.mybox > div.txtnav > div.txtinfo.hide720 > span:nth-child(2)\",\r\n    titleDiv: \"body > div.container > div.mybox > div.tools\",\r\n    searchInput:\r\n      \"body > header > div > form > div > div.inputbox > input[type=text]\",\r\n    searchForm: \"body > header > div > form\",\r\n  };\r\n  /**\r\n   * \u5404\u7A2E\u9801\u9762\u5224\u65B7\u8207\u6578\u64DA\u7372\u53D6\u65B9\u6CD5\u96C6\u5408\r\n   */\r\n  private readonly data = {\r\n    // \u5224\u65B7\u662F\u5426\u6709\u66F8\u7C4D\u4FE1\u606F\r\n    HasBookInfo: typeof bookinfo !== \"undefined\",\r\n    // \u5224\u65B7\u662F\u5426\u5728\u66F8\u67B6\u9801\u9762\r\n    IsBookshelf: (href: string = location.href) => {\r\n      if (this.data.IsTwkan) {\r\n        return new URL(href).pathname === \"/bookcase\";\r\n      } else {\r\n        return new URL(href).pathname === \"/modules/article/bookcase.php\";\r\n      }\r\n    },\r\n    // \u66F8\u7C4D\u76F8\u95DC\u64CD\u4F5C\r\n    Book: {\r\n      // \u7372\u53D6\u66F8\u7C4DID\r\n      GetAid: (href: string = window.location.href) => {\r\n        if (this.data.HasBookInfo) {\r\n          return bookinfo.articleid;\r\n        }\r\n        return href.split(\"/\")[4];\r\n      },\r\n      // \u7372\u53D6\u7AE0\u7BC0ID\r\n      GetCid: (href: string = window.location.href) => {\r\n        if (this.data.HasBookInfo) {\r\n          return bookinfo.chapterid;\r\n        }\r\n        return href.split(\"/\")[5];\r\n      },\r\n      // \u66F8\u7C4DURL\u6A21\u5F0F\r\n      pattern: /^\\/(txt|c|r)\\/(\\d|[a-z])+\\/(\\d|[a-z])+(\\.html)?$/m,\r\n      // \u5224\u65B7\u662F\u5426\u70BA\u66F8\u7C4D\u9801\u9762\r\n      Is: (href: string = window.location.href) => {\r\n        return this.data.Book.pattern.test(new URL(href).pathname);\r\n      },\r\n    },\r\n    // \u66F8\u7C4D\u4FE1\u606F\u76F8\u95DC\u64CD\u4F5C\r\n    Info: {\r\n      // \u66F8\u7C4D\u4FE1\u606FURL\u6A21\u5F0F\r\n      pattern: /^\\/(book|b|article)\\/(\\d|[a-z])+\\.htm(l)?$/m,\r\n      // \u5224\u65B7\u662F\u5426\u70BA\u66F8\u7C4D\u4FE1\u606F\u9801\u9762\r\n      Is: (pathname: string = window.location.pathname) => {\r\n        return this.data.Info.pattern.test(pathname);\r\n      },\r\n    },\r\n    // \u7D50\u675F\u9801\u9762\u76F8\u95DC\u64CD\u4F5C\r\n    End: {\r\n      // \u5224\u65B7\u662F\u5426\u70BA\u7D50\u675F\u9801\u9762\r\n      Is: (href: string = window.location.href) => {\r\n        if (this.data.Info.Is()) {\r\n          const searchParams = new URL(href).searchParams;\r\n          return searchParams.get(\"FromBook\") === \"true\";\r\n        }\r\n        if (this.data.IsTwkan) {\r\n          let h = new URL(href);\r\n          if (\r\n            /txt\\/\\d+\\/end\\.html/.test(h.pathname) &&\r\n            h.searchParams.get(\"FromBook\") === \"true\"\r\n          ) {\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        }\r\n        return false;\r\n      },\r\n    },\r\n    // \u7372\u53D6\u4E0B\u4E00\u9801URL\r\n    GetNextPageUrl: () => {\r\n      const nextPageEle = this.getNextPageElement();\r\n      return nextPageEle?.href;\r\n    },\r\n    // \u5224\u65B7\u4E0B\u4E00\u9801\u662F\u5426\u70BA\u7D50\u675F\u9801\u9762\r\n    IsNextEnd: () => {\r\n      if (this.data.Book.Is()) {\r\n        const nextUrl = this.data.GetNextPageUrl();\r\n        if (nextUrl) {\r\n          return (\r\n            this.data.End.Is(nextUrl) ||\r\n            this.data.Info.Is(new URL(nextUrl).pathname)\r\n          );\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n    // \u5224\u65B7\u662F\u5426\u70BA69shu.biz\u57DF\u540D\r\n    IsBiz: location.host === \"69shu.biz\",\r\n    // \u5224\u65B7\u662F\u5426\u70BAtwkan.com\u57DF\u540D\r\n    IsTwkan: location.host === \"twkan.com\",\r\n\r\n    NotAny: () => {\r\n      return (\r\n        !this.data.Book.Is() &&\r\n        !this.data.Info.Is() &&\r\n        !this.data.End.Is() &&\r\n        !this.data.IsBookshelf()\r\n      );\r\n    },\r\n  };\r\n  i18nInstance: I18n;\r\n  t: typeof this.i18nInstance.t;\r\n\r\n  /**\r\n   * \u53D6\u5F97\u4E0B\u4E00\u9801\u7684a\u5143\u7D20\r\n   */\r\n  getNextPageElement(): HTMLAnchorElement | null {\r\n    for (const selector of this.SELECTORS.nextPage) {\r\n      const element = document.querySelector<HTMLAnchorElement>(selector);\r\n      if (element?.href) return element;\r\n    }\r\n    // \u5099\u7528\u65B9\u6848\uFF1A\u5C0B\u627E\u6587\u5B57\u70BA\"\u4E0B\u4E00\u7AE0\"\u7684\u9023\u7D50\r\n    return Array.from(document.querySelectorAll(\"a\")).find(\r\n      (link) => link.textContent === \"\u4E0B\u4E00\u7AE0\"\r\n    ) as HTMLAnchorElement | null;\r\n  }\r\n\r\n  /**\r\n   * \u69CB\u9020\u51FD\u6578\uFF0C\u6839\u64DA\u7576\u524D\u9801\u9762\u81EA\u52D5\u5206\u6D3E\u5C0D\u61C9\u8655\u7406\r\n   */\r\n  constructor() {\r\n    this.i18nInstance = new I18n(i18nData, config.Language.toString());\r\n    this.t = this.i18nInstance.t;\r\n\r\n    try {\r\n      if (config.Debug) {\r\n        console.debug(this.debugInfo());\r\n      }\r\n\r\n      // #tag search\r\n      const search = new URLSearchParams(location.search).get(\"q\");\r\n      if (search) this.performSearch(search);\r\n\r\n      // #tag BookEnd\r\n      if (this.data.End.Is()) {\r\n        if (config.Debug) console.log(\"End page detected\");\r\n        if (config.IsEndClose) window.close();\r\n      }\r\n      // #tag Book\r\n      if (this.data.Book.Is()) {\r\n        if (config.Debug) console.log(\"Book page detected\");\r\n        this.handleBookPage();\r\n      }\r\n      // #tag Info\r\n      if (this.data.Info.Is()) {\r\n        if (config.Debug) console.log(\"Book info page detected\");\r\n        let Ele = document.querySelector<HTMLAnchorElement>(\r\n          \"body > div.container > ul > li.col-8 > div:nth-child(2) > ul > li:nth-child(2) > a\"\r\n        );\r\n        if (Ele) {\r\n          Ele.click();\r\n        }\r\n      }\r\n      // #tag Bookshelf\r\n      if (this.data.IsBookshelf()) {\r\n        if (config.Debug) console.log(\"Bookshelf page detected\");\r\n        this.handleBookshelf();\r\n      }\r\n\r\n      // if not match any pattern\r\n      if (this.data.NotAny()) {\r\n        if (!config.Debug) {\r\n          alert(this.t(\"noMatchingPattern\"));\r\n        }\r\n      }\r\n    } catch (error) {\r\n      if (!config.Debug) {\r\n        alert(`${this.t(\"errorOccurred\")}${String(error)}`);\r\n      }\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \u66F8\u9801\u81EA\u52D5\u5316\u8655\u7406\uFF1A\u6A23\u5F0F\u3001\u5C0E\u822A\u3001\u5143\u7D20\u79FB\u9664\u3001\u66F8\u6AC3\u3001\u4F5C\u8005\u9023\u7D50\u3001\u4E0B\u4E00\u9801\u93C8\u63A5\r\n   */\r\n  private handleBookPage(): void {\r\n    if (config.IsHookAlert) this.hookAlert();\r\n    this.addStyles();\r\n    this.modifyPageNavigation();\r\n    removeElement(\r\n      \".mytitle\",\r\n      \".top_Scroll\",\r\n      \"#pagefootermenu\",\r\n      \"body > div.container > div > div.yueduad1\",\r\n      \"#pageheadermenu\",\r\n      \".bottom-ad2\",\r\n      \"body > div.container > div.yuedutuijian.light\"\r\n    );\r\n    if (this.data.IsTwkan) {\r\n      removeElement(\"#container > br\");\r\n    }\r\n    if (config.AutoAddBookcase) this.autoAddToBookcase();\r\n    this.insertAuthorLink();\r\n    this.updateNextPageLink();\r\n    if (this.data.IsTwkan) {\r\n      const raw_replace_json = GM_getResourceText(\"replace_json\");\r\n      let replace_json: {\r\n        [key: string]: string;\r\n      } = {};\r\n      try {\r\n        replace_json = JSON.parse(raw_replace_json);\r\n      } catch (error) {\r\n        if (error instanceof SyntaxError) {\r\n          if (config.Debug) {\r\n            console.log(error);\r\n          } else {\r\n            alert(error);\r\n          }\r\n        } else {\r\n          throw error;\r\n        }\r\n      }\r\n      if (config.Debug) {\r\n        console.log(\"replace_json: \", replace_json);\r\n      }\r\n\r\n      for (const key in replace_json) {\r\n        if (Object.hasOwn(replace_json, key)) {\r\n          const element = replace_json[key];\r\n          if (document.querySelector<HTMLDivElement>(\"#txtcontent\")) {\r\n            (\r\n              document.querySelector<HTMLDivElement>(\r\n                \"#txtcontent\"\r\n              ) as HTMLDivElement\r\n            ).innerText = (\r\n              document.querySelector<HTMLDivElement>(\r\n                \"#txtcontent\"\r\n              ) as HTMLDivElement\r\n            ).innerText.replaceAll(key, element);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \u81EA\u52D5\u52A0\u5165\u66F8\u6AC3\uFF08\u5982\u672A\u5728\u5C01\u9396\u540D\u55AE\uFF09\r\n   */\r\n  private autoAddToBookcase(): void {\r\n    const aid = this.data.Book.GetAid();\r\n    if (!config.AutoAddBookcaseBlockade.includes(aid)) {\r\n      this.addBookcase();\r\n    } else {\r\n      console.log(\"Book is in the blockade list, not auto adding to bookcase.\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \u66F4\u65B0\u4E0B\u4E00\u9801\u93C8\u63A5\uFF0C\u9644\u52A0FromBook\u53C3\u6578\r\n   */\r\n  private updateNextPageLink(): void {\r\n    const nextPageEle = this.getNextPageElement();\r\n    if (nextPageEle) {\r\n      const href = new URL(nextPageEle.href);\r\n      href.searchParams.set(\"FromBook\", \"true\");\r\n      nextPageEle.href = href.toString();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \u6514\u622A\u5168\u5C40alert\uFF0C\u6839\u64DA\u5C01\u9396\u540D\u55AE\u904E\u6FFE\r\n   */\r\n  private hookAlert(): void {\r\n    const _alert: Function = alert;\r\n    unsafeWindow.alert = (...message: any) => {\r\n      if (\r\n        !config.HookAlertBlockade.some(\r\n          (blockade) =>\r\n            JSON.stringify(message) === JSON.stringify(blockade) ||\r\n            JSON.stringify(blockade) === \"*\"\r\n        )\r\n      ) {\r\n        _alert(...message);\r\n      }\r\n      if (config.Debug) console.log(\"Alert message:\", message);\r\n    };\r\n  }\r\n\r\n  /**\r\n   * \u6CE8\u5165\u81EA\u5B9A\u7FA9CSS\u6A23\u5F0F\r\n   */\r\n  private addStyles(): void {\r\n    const css1 = GM_getResourceText(\"css1\");\r\n    GM_addStyle(css1);\r\n    if (config.Debug) console.log(\"CSS added\");\r\n  }\r\n\r\n  /**\r\n   * \u79FB\u9664\u539F\u6709onkeydown\uFF0C\u8A3B\u518A\u81EA\u5B9A\u7FA9\u9375\u76E4\u5C0E\u822A\r\n   */\r\n  private modifyPageNavigation(): void {\r\n    document.onkeydown = null;\r\n    addEventListener(\"keydown\", this.keydownHandler.bind(this));\r\n  }\r\n\r\n  /**\r\n   * \u8655\u7406\u53F3\u9375\u5C0E\u822A\u8207\u7D50\u675F\u81EA\u52D5\u95DC\u9589\r\n   */\r\n  private keydownHandler(e: KeyboardEvent): void {\r\n    if (!e.repeat && e.key === \"ArrowRight\") {\r\n      const nextPageLink = this.data.GetNextPageUrl();\r\n      if (nextPageLink) {\r\n        let href = new URL(nextPageLink);\r\n        href.searchParams.set(\"FromBook\", \"true\");\r\n        window.location.href = href.toString();\r\n      }\r\n      if (this.data.IsNextEnd()) {\r\n        if (config.IsEndClose) {\r\n          window.close();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \u52A0\u5165\u66F8\u6AC3\uFF08\u6839\u64DA\u4E0D\u540C\u7AD9\u9EDE\u547C\u53EB\u4E0D\u540CAPI\u6216\u6A21\u64EC\u9EDE\u64CA\uFF09\r\n   */\r\n  private addBookcase(): void {\r\n    const aid = this.data.Book.GetAid();\r\n    const cid = this.data.Book.GetCid();\r\n    if (!addbookcase.toString().includes(\"Ajax.Tip\")) {\r\n      addbookcase(aid, cid);\r\n    } else {\r\n      const addBookcaseLink =\r\n        document.querySelector<HTMLElement>(\"#a_addbookcase\");\r\n      addBookcaseLink?.click();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \u66FF\u63DB\u6A19\u984Cdiv\u70BA\u5E36\u6709\u4F5C\u8005\u9023\u7D50\u7684\u65B0\u5143\u7D20\r\n   */\r\n  private insertAuthorLink(): void {\r\n    let author;\r\n    if (!bookinfo) {\r\n      author =\r\n        document\r\n          .querySelector(this.SELECTORS.authorInfo)\r\n          ?.textContent?.trim()\r\n          .split(\" \")[1] ?? \"undefined\";\r\n    } else {\r\n      author = bookinfo.author;\r\n    }\r\n    const titleDiv = document.querySelector(\r\n      this.SELECTORS.titleDiv\r\n    ) as HTMLDivElement;\r\n    if (titleDiv) {\r\n      const titleLink = this.createTitleLink();\r\n      titleDiv.parentNode?.replaceChild(titleLink, titleDiv);\r\n    }\r\n    const authorLink = this.createAuthorLink(author);\r\n    let oal = document.querySelector(\r\n      \"#container > div.mybox > div > div.txtinfo.hide720 > span:nth-child(2)\"\r\n    );\r\n    if (oal === null) {\r\n      console.warn(\"insertAuthorLink:oal=null\");\r\n      return void 0;\r\n    }\r\n    document\r\n      .querySelector(\r\n        \"#container > div.mybox > div.txtnav > div.txtinfo.hide720\"\r\n      )\r\n      ?.replaceChild(authorLink, oal);\r\n  }\r\n\r\n  /**\r\n   * \u5EFA\u7ACB\u4F5C\u8005\u9801\u9762\u9023\u7D50\u5143\u7D20\r\n   */\r\n  private createAuthorLink(author: string): HTMLAnchorElement {\r\n    const authorLink = document.createElement(\"a\");\r\n    if (this.data.IsTwkan) {\r\n      authorLink.href = `https://twkan.com/author/${author}.html`;\r\n    } else {\r\n      authorLink.href = `${\r\n        window.location.origin\r\n      }/modules/article/author.php?author=${encodeURIComponent(author)}`;\r\n    }\r\n    authorLink.textContent = \"\u4F5C\u8005\uFF1A \" + author;\r\n    authorLink.style.color = \"#007ead\";\r\n    return authorLink;\r\n  }\r\n\r\n  /**\r\n   * \u5EFA\u7ACB\u66F8\u540D\u9023\u7D50\u5143\u7D20\r\n   */\r\n  private createTitleLink(): HTMLAnchorElement {\r\n    const titleLink = document.createElement(\"a\");\r\n    titleLink.innerHTML = this.data.HasBookInfo\r\n      ? bookinfo.articlename ?? document.title.split(\"-\")[0]\r\n      : document.title.split(\"-\")[0];\r\n    titleLink.classList.add(\"userjs_add\");\r\n    titleLink.id = \"title\";\r\n    titleLink.href = `${window.location.origin}/${\r\n      this.data.IsBiz ? \"b\" : \"book\"\r\n    }/${this.data.Book.GetAid()}.${\r\n      this.data.IsBiz || this.data.IsTwkan ? \"html\" : \"htm\"\r\n    }`;\r\n    return titleLink;\r\n  }\r\n\r\n  /**\r\n   * \u66F8\u67B6\u9801\u9762\uFF1A\u6536\u96C6\u66F8\u7C4D\u8CC7\u6599\u4E26\u8A3B\u518A\u83DC\u55AE\r\n   */\r\n  private async handleBookshelf(): Promise<void> {\r\n    const bookData = await this.collectBookData();\r\n    if (config.Debug) console.log(\"Bookshelf data collected\", bookData);\r\n    this.registerMenuCommand(bookData);\r\n  }\r\n\r\n  /**\r\n   * \u641C\u5C0B\u529F\u80FD\uFF1A\u81EA\u52D5\u586B\u5165\u4E26\u63D0\u4EA4\u8868\u55AE\r\n   */\r\n  private performSearch(search: string): void {\r\n    const searchInput = document.querySelector(\r\n      this.SELECTORS.searchInput\r\n    ) as HTMLInputElement;\r\n    const searchForm = document.querySelector(\r\n      this.SELECTORS.searchForm\r\n    ) as HTMLFormElement;\r\n    if (searchInput && searchForm) {\r\n      searchInput.value = search;\r\n      searchForm.submit();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \u905E\u8FF4\u6536\u96C6\u66F8\u67B6\u66F8\u7C4D\u8CC7\u6599\uFF0C\u6700\u591A\u91CD\u8A665\u6B21\r\n   */\r\n  private async collectBookData(retryCount: number = 0): Promise<BookData[]> {\r\n    const books: Array<BookData> = [];\r\n    const labels = document.querySelectorAll(\"[id^='book_']\");\r\n    if (config.Debug) console.groupCollapsed(\"collectBookData\");\r\n    if (labels.length === 0) {\r\n      if (retryCount <= 5) {\r\n        console.warn(this.t(\"noLabelsFound\"));\r\n        await new Promise((resolve) => setTimeout(resolve, 5000));\r\n        return this.collectBookData(retryCount + 1);\r\n      } else {\r\n        console.error(this.t(\"maxRetriesReached\"));\r\n        return []; // \u5230\u9054\u6700\u5927\u91CD\u8A66\u6B21\u6578, \u8FD4\u56DE\u7A7A\u9663\u5217\r\n      }\r\n    }\r\n    if (config.Debug) {\r\n      console.log(labels);\r\n    }\r\n    labels.forEach((label) => {\r\n      const bookContainer = label;\r\n\r\n      const tmp = (function () {\r\n        if (\r\n          Array.from(label.querySelectorAll(\"label\")).find(\r\n            (label2) => label2.textContent === \"\u66F4\u65B0\"\r\n          )\r\n        ) {\r\n          const bookContinueEle = label.querySelector(\r\n            \"div.newright > a.btn.btn-tp\"\r\n          ) as HTMLAnchorElement;\r\n          const bookContinueLink = bookContinueEle.href;\r\n\r\n          const BookName = label.querySelector<HTMLSpanElement>(\r\n            \"div.newnav > h3 > a > span\"\r\n          )?.textContent as string;\r\n\r\n          const bookImgEle = label.querySelector(\"a > img\") as HTMLImageElement;\r\n          const bookImgUrl = bookImgEle.src;\r\n          // }\r\n          return { bookContinueLink, BookName, bookImgUrl };\r\n        } else {\r\n          return false;\r\n        }\r\n      })();\r\n      if (tmp) {\r\n        const { bookContinueLink, BookName, bookImgUrl } = tmp;\r\n\r\n        const push_data: BookData = {\r\n          Updata: {\r\n            url: {\r\n              value: bookContinueLink,\r\n              URLParams: new URLSearchParams(bookContinueLink),\r\n            },\r\n          },\r\n          Mate: {\r\n            BookName: BookName,\r\n            BookHtmlObj: bookContainer,\r\n            BookImgUrl: bookImgUrl,\r\n          },\r\n        };\r\n        if (config.Debug) {\r\n          console.group(push_data.Mate.BookName);\r\n          console.log(push_data.Mate);\r\n          console.table(push_data.Updata);\r\n          console.groupEnd();\r\n        }\r\n\r\n        books.push(push_data);\r\n      }\r\n    });\r\n    if (config.Debug) console.groupEnd();\r\n    return books;\r\n  }\r\n\r\n  /**\r\n   * \u8A3B\u518A\u83DC\u55AE\u547D\u4EE4\uFF0C\u9EDE\u64CA\u53EF\u6279\u91CF\u6253\u958B\u6240\u6709\u66F4\u65B0\u66F8\u7C4D\r\n   */\r\n  private registerMenuCommand(bookData: BookData[]) {\r\n    GM_registerMenuCommand(\r\n      `${\r\n        bookData.length === 0\r\n          ? this.t(\"noUpdates\")\r\n          : `${bookData.length}${this.t(\"updatesAvailable\")}`\r\n      }`,\r\n      () => {\r\n        bookData.forEach((data) => {\r\n          GM_openInTab(data.Updata.url.value);\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * \u8F38\u51FA\u8ABF\u8A66\u8CC7\u8A0A\r\n   */\r\n  private debugInfo() {\r\n    return {\r\n      IsBook: this.data.Book.Is(),\r\n      IsInfo: this.data.Info.Is(),\r\n      IsEnd: this.data.End.Is(),\r\n      IsNextEnd: this.data.IsNextEnd(),\r\n      IsBookshelf: this.data.IsBookshelf(),\r\n      HasBookinfo: this.data.HasBookInfo,\r\n      IsBiz: this.data.IsBiz,\r\n      IsTwkan: this.data.IsTwkan,\r\n      ...config,\r\n    };\r\n  }\r\n}\r\n\r\n// \u521D\u59CB\u5316\u66F8\u7C4D\u7BA1\u7406\u5668\r\nconst bookManager = new BookManager();\r\n"],
  "mappings": "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",
  "names": ["Language"]
}
