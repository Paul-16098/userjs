{
  "version": 3,
  "sources": ["69shuba auto %E6%9B%B8%E7%B0%BD.user.ts"],
  "sourcesContent": ["/// <reference path = \"./../Tools/Tools.user.d.ts\" />\n\n// \u8A9E\u8A00\u9078\u9805\u679A\u8209\nenum Language {\n  en = \"en\",\n  zh = \"zh\",\n}\n\n/**\n * \u7528\u6236\u914D\u7F6E\u985E\uFF0C\u8CA0\u8CAC\u7BA1\u7406\u8173\u672C\u7684\u5404\u9805\u8A2D\u7F6E\uFF0C\u4E26\u8A3B\u518A\u83DC\u55AE\u3002\n */\nclass Config {\n  /** \u662F\u5426\u958B\u555F\u5075\u932F\u6A21\u5F0F */\n  Debug: boolean = GM_getValue(\"Debug\", false);\n  /** \u7D50\u675F\u9801\u662F\u5426\u81EA\u52D5\u95DC\u9589 */\n  IsEndClose: boolean = GM_getValue(\"IsEndClose\", true);\n  /** \u662F\u5426\u81EA\u52D5\u52A0\u5165\u66F8\u6AC3 */\n  AutoAddBookcase: boolean = GM_getValue(\"AutoAddBookcase\", true);\n  /** \u81EA\u52D5\u52A0\u5165\u66F8\u6AC3\u7684\u5C01\u9396\u540D\u55AE\uFF08\u66F8ID\u9663\u5217\uFF09 */\n  AutoAddBookcaseBlockade: Array<string> = GM_getValue(\n    \"AutoAddBookcaseBlockade\",\n    []\n  );\n  /** \u662F\u5426\u6514\u622Aalert */\n  IsHookAlert: boolean = GM_getValue(\"IsHookAlert\", true);\n  /** \u6514\u622Aalert\u7684\u8A0A\u606F\u5C01\u9396\u540D\u55AE */\n  HookAlertBlockade: Array<Array<any>> = GM_getValue(\"HookAlertBlockade\", [\n    [\"\u6DFB\u52A0\u6210\u529F\"],\n    [\"\u522A\u9664\u6210\u529F!\"],\n    [\"\u606D\u559C\u60A8\uFF0C\u8BE5\u7AE0\u8282\u5DF2\u7ECF\u52A0\u5165\u5230\u60A8\u7684\u4E66\u7B7E\uFF01\"],\n  ]);\n  /** \u8A9E\u8A00\u8A2D\u5B9A */\n  Language: Language = GM_getValue(\"Language\", Language.zh);\n\n  constructor() {\n    this.set();\n    this.registerConfigMenu();\n  }\n  /**\n   * \u8A3B\u518A\u6240\u6709\u914D\u7F6E\u9805\u7684\u83DC\u55AE\n   */\n  private registerConfigMenu() {\n    for (const key in this) {\n      const value = this[key as keyof Config];\n      let menu = undefined;\n      // \u8A9E\u8A00\u5207\u63DB\u83DC\u55AE\n      if (Object.values(Language).includes(value as Language)) {\n        menu = () => {\n          Object.values(Language).forEach((lang) => {\n            if (lang !== value) {\n              GM_setValue(\"Language\", lang);\n              location.reload();\n            }\n          });\n        };\n      }\n      setMenu(key, menu, value, {\n        zh: \"\u4E2D\u6587\",\n        en: \"english\",\n        Debug: \"\u5075\u932F\",\n        AutoAddBookcase: \"\u81EA\u52D5\u6DFB\u52A0\u66F8\u6AC3\",\n        AutoAddBookcaseBlockade: \"\u81EA\u52D5\u6DFB\u52A0\u66F8\u6AC3\u5C01\u9396\",\n        Language: \"\u8A9E\u8A00\",\n        IsEndClose: \"\u7D50\u675F\u5F8C\u95DC\u9589\",\n        IsHookAlert: \"\u639B\u9264Alert\",\n        HookAlertBlockade: \"\u639B\u9264Alert\u5C01\u9396\",\n      });\n    }\n  }\n  /**\n   * \u5C07\u7576\u524D\u914D\u7F6E\u5BEB\u5165GM\u5B58\u5132\n   */\n  private set() {\n    GM_setValue(\"Debug\", this.Debug);\n    GM_setValue(\"IsEndClose\", this.IsEndClose);\n    GM_setValue(\"AutoAddBookcase\", this.AutoAddBookcase);\n    GM_setValue(\"AutoAddBookcaseBlockade\", this.AutoAddBookcaseBlockade);\n    GM_setValue(\"IsHookAlert\", this.IsHookAlert);\n    GM_setValue(\"HookAlertBlockade\", this.HookAlertBlockade);\n    GM_setValue(\"Language\", this.Language);\n  }\n}\n\n// \u914D\u7F6E\u521D\u59CB\u5316\nconst config: Config = new Config();\n\n// i18n \u8A2D\u5B9A\nconst i18nData: typeof I18n.prototype.langJson = {\n  en: {\n    noMatchingPattern: \"No matching URL pattern found\",\n    errorOccurred: \"An error occurred: \",\n    noLabelsFound: \"No labels found, retrying in 5 seconds...\",\n    maxRetriesReached: \"Max retries reached. No labels found.\",\n    noUpdates: \"No updates\",\n    updatesAvailable: \" updates available\",\n  },\n  zh: {\n    noMatchingPattern: \"\u672A\u627E\u5230\u5339\u914D\u7684 URL \u6A21\u5F0F\",\n    errorOccurred: \"\u767C\u751F\u4E86\u4E00\u4E9B\u932F\u8AA4: \",\n    noLabelsFound: \"\u672A\u627E\u5230\u6A19\u7C64\uFF0C5 \u79D2\u5F8C\u91CD\u8A66...\",\n    maxRetriesReached: \"\u5DF2\u9054\u5230\u6700\u5927\u91CD\u8A66\u6B21\u6578\u3002\u672A\u627E\u5230\u6A19\u7C64\u3002\",\n    noUpdates: \"\u6C92\u6709\u66F4\u65B0\",\n    updatesAvailable: \"\u500B\u66F4\u65B0\",\n  },\n};\n\n// \u66F8\u7C4D\u6578\u64DA\u63A5\u53E3\ninterface BookData {\n  Updata: {\n    url: {\n      value: string;\n      URLParams: URLSearchParams;\n    };\n  };\n  Mate: {\n    BookName: string;\n    BookHtmlObj: Element;\n    BookImgUrl: string;\n  };\n}\n\n/**\n * `BookManager` \u985E\u5225\u63D0\u4F9B\u4E86\u5404\u7A2E\u65B9\u6CD5\u4F86\u7BA1\u7406\u7DB2\u9801\u4E0A\u8207\u66F8\u7C4D\u76F8\u95DC\u7684\u8CC7\u6599\u4E26\u8207\u4E4B\u4E92\u52D5\u3002\n * \u5B83\u5305\u62EC\u5075\u6E2C\u5716\u66F8\u9801\u9762\u3001\u5716\u66F8\u8CC7\u8A0A\u9801\u9762\u3001\u7D50\u675F\u9801\u9762\u548C\u66F8\u67B6\u9801\u9762\u7684\u529F\u80FD\u3002\n * \u5B83\u9084\u63D0\u4F9B\u4E86\u8655\u7406\u5C0E\u822A\u3001\u5C07\u66F8\u7C4D\u6DFB\u52A0\u5230\u66F8\u67B6\u4EE5\u53CA\u4FEE\u6539\u9801\u9762\u5143\u7D20\u7684\u65B9\u6CD5\u3002\n *\n * @class\n * @classdesc \u6B64\u985E\u65E8\u5728\u81EA\u52D5\u5316\u4E26\u589E\u5F37\u8207\u5716\u66F8\u76F8\u95DC\u7684\u7DB2\u7AD9\u7684\u4F7F\u7528\u8005\u9AD4\u9A57\u3002\n *\n * @property {Object} data -\u5305\u542B\u7528\u65BC\u5075\u6E2C\u548C\u8655\u7406\u66F8\u7C4D\u76F8\u95DC\u9801\u9762\u7684\u5404\u7A2E\u65B9\u6CD5\u548C\u6A21\u5F0F\u3002\n * @property {Function} data.HasBookInfo  -\u6AA2\u67E5\u662F\u5426\u53EF\u7528\u66F8\u7C4D\u4FE1\u606F\u3002\n * @property {Function} data.IsBookshelf  -\u6AA2\u67E5\u7576\u524D\u9801\u9762\u662F\u5426\u662F\u66F8\u67B6\u9801\u9762\u3002\n * @property {Object} data.Book  -\u5305\u542B\u8207\u66F8\u7C4D\u64CD\u4F5C\u6709\u95DC\u7684\u65B9\u6CD5\u3002\n * @property {Function} data.Book.GetAid  -\u6AA2\u7D22\u66F8ID\u3002\n * @property {Function} data.Book.GetCid  -\u6AA2\u7D22\u7AE0\u7BC0ID\u3002\n * @property {RegExp} data.Book.pattern  -\u6A19\u8B58\u66F8\u9801\u7684\u6A21\u5F0F\u3002\n * @property {Function} data.Book.Is  -\u6AA2\u67E5\u7576\u524D\u9801\u9762\u662F\u5426\u662F\u66F8\u9801\u3002\n * @property {Object} data.Info  -\u5305\u542B\u8207\u66F8\u7C4D\u4FE1\u606F\u64CD\u4F5C\u6709\u95DC\u7684\u65B9\u6CD5\u3002\n * @property {RegExp} data.Info.pattern  -\u8B58\u5225\u5716\u66F8\u4FE1\u606F\u9801\u9762\u7684\u6A21\u5F0F\u3002\n * @property {Function} data.Info.Is  -\u6AA2\u67E5\u7576\u524D\u9801\u9762\u662F\u5426\u662F\u66F8\u7C4D\u4FE1\u606F\u9801\u9762\u3002\n * @property {Object} data.End  -\u5305\u542B\u8207\u6700\u7D42\u9801\u9762\u64CD\u4F5C\u76F8\u95DC\u7684\u65B9\u6CD5\u3002\n * @property {Function} data.End.Is  -\u6AA2\u67E5\u7576\u524D\u9801\u9762\u662F\u5426\u662F\u7D50\u675F\u9801\u9762\u3002\n * @property {Function} data.GetNextPageUrl  -\u6AA2\u7D22\u4E0B\u4E00\u9801\u7684URL\u3002\n * @property {Function} data.IsNextEnd  -\u6AA2\u67E5\u4E0B\u4E00\u9801\u662F\u5426\u662F\u7D42\u9EDE\u9801\u9762\u3002\n * @property {Function} data.IsBiz  -\u6AA2\u67E5\u7576\u524D\u57DF\u662F\u5426\u70BA\u201C 69shu.biz\u201D\u3002\n *\n * @constructor\n * @description \u521D\u59CB\u5316 `Bookmanager` \u985E\u7684\u65B0\u5BE6\u4F8B\u3002\u5B83\u8A3B\u518A\u4E86\u914D\u7F6E\u83DC\u55AE\u4E26\u8655\u7406\u4E0D\u540C\u985E\u578B\u7684\u9801\u9762\uFF08\u66F8\u7C4D, \u66F8\u7C4D\u4FE1\u606F, \u7D50\u675F, \u66F8\u67B6\uFF09\u3002\u5982\u679C\u8A2D\u7F6E\u4E86 `config.debug` \u6A19\u8A8C, \u5B83\u9084\u8A18\u9304\u4E86\u8ABF\u8A66\u4FE1\u606F\u3002\n * @throws \u5982\u679C\u767C\u751F\u932F\u8AA4\u4E26\u4E14\u672A\u8A2D\u7F6E `config.debug` , \u5C07\u63D0\u9192\u7528\u6237\u3002\n *\n * @method handleBookPage\n * @description \u900F\u904E\u57F7\u884C\u5404\u7A2E\u4FEE\u6539\u548C\u589E\u5F37\u4F86\u8655\u7406\u66F8\u7C4D\u9801\u9762\u3002\n * @private\n * @returns {void}\n *\n * @method hookAlert\n * @description \u639B\u920E\u5168\u57DF\u300C\u8B66\u5831\u300D\u529F\u80FD\u4EE5\u6709\u689D\u4EF6\u5730\u963B\u6B62\u6216\u8A18\u9304\u8B66\u5831\u8A0A\u606F\u3002\n * @private\n * @returns {void}\n *\n * @method addStyles\n * @description \u900F\u904E\u5F9E\u6307\u5B9A\u8CC7\u6E90\u6CE8\u5165 CSS \u5167\u5BB9, \u5C07\u81EA\u8A02\u6A23\u5F0F\u65B0\u589E\u81F3\u6587\u4EF6\u3002\n * @private\n * @returns {void}\n *\n * @method modifyPageNavigation\n * @description \u900F\u904E\u522A\u9664\u73FE\u6709\u7684\u300Conkeydown\u300D\u4E8B\u4EF6\u8655\u7406\u7A0B\u5E8F\u4E26\u65B0\u589E\u65B0\u7684\u300Ckeydown\u300D\u4E8B\u4EF6\u5075\u807D\u5668\u4F86\u4FEE\u6539\u9801\u9762\u5C0E\u822A\u3002\n * @private\n * @returns {void}\n *\n * @method keydownHandler\n * @description \u8655\u7406\u9375\u76E4\u4E8B\u4EF6, \u4EE5\u4FBF\u5728\u6309\u4E0B\u300C\u5411\u53F3\u7BAD\u982D\u300D\u9375\u6642\u5C0E\u89BD\u81F3\u4E0B\u4E00\u9801\u3002\n * @private\n * @param {KeyboardEvent} e -\u9375\u76E4\u4E8B\u4EF6\u7269\u4EF6\u3002\n * @returns {void}\n *\n * @method addBookcase\n * @description \u5C07\u7576\u524D\u7684\u66F8\u6DFB\u52A0\u5230\u66F8\u67B6\u4E2D\u3002\n * @private\n * @returns {void}\n *\n * @method insertAuthorLink\n * @description \u63D2\u5165\u4F5C\u8005\u93C8\u63A5\u4E26\u7528\u65B0\u93C8\u63A5\u66FF\u63DB\u6A19\u984CDIV\u3002\n * @private\n * @returns {void}\n *\n * @method handleBookshelf\n * @description \u901A\u904E\u6536\u96C6\u66F8\u7C4D\u6578\u64DA\u548C\u8A3B\u518A\u83DC\u55AE\u547D\u4EE4\u4F86\u8655\u7406\u66F8\u67B6\u3002\n * @private\n * @returns {Promise<void>}\n *\n * @method collectBookData\n * @description \u901A\u904E\u4EE5 `book_` \u958B\u982D\u67E5\u8A62ID, \u5F9EDOM\u6536\u96C6\u66F8\u7C4D\u6578\u64DA\u3002\n * @private\n * @param {number} [retryCount=0]  -\u7576\u524D\u7684\u91CD\u8A66\u8A08\u6578\u3002\n * @returns {Promise<BookData[]>}  -\u89E3\u6C7A\u4E00\u7CFB\u5217\u6536\u96C6\u7684\u66F8\u7C4D\u6578\u64DA\u7684\u627F\u8AFE\u3002\n *\n * @method registerMenuCommand\n * @description \u8A3B\u518A\u83DC\u55AE\u547D\u4EE4, \u5176\u4E2D\u5305\u542B\u6536\u96C6\u7684\u66F8\u7C4D\u6578\u64DA\u3002\n * @private\n * @param {BookData[]} bookData  -\u6536\u96C6\u7684\u66F8\u7C4D\u6578\u64DA\u3002\n * @returns {void}\n *\n * @method debugInfo\n * @description \u6536\u96C6\u548C\u8FD4\u56DE\u8ABF\u8A66\u4FE1\u606F\u3002\n * @private\n * @returns {Object}  -\u8ABF\u8A66\u4FE1\u606F\u3002\n *\n * @method registerConfigMenu\n * @description \u8A3B\u518A\u914D\u7F6E\u83DC\u55AE\u3002\n * @private\n * @returns {void}\n */\nclass BookManager {\n  /** \u5E38\u7528\u9078\u64C7\u5668\u96C6\u5408 */\n  SELECTORS = {\n    nextPage: [\n      \"body > div.container > div.mybox > div.page1 > a:nth-child(4)\",\n      \"body > div.mainbox > div > div.page1 > a:nth-child(4)\",\n    ],\n    authorInfo:\n      \"body > div.container > div.mybox > div.txtnav > div.txtinfo.hide720 > span:nth-child(2)\",\n    titleDiv: \"body > div.container > div.mybox > div.tools\",\n    searchInput:\n      \"body > header > div > form > div > div.inputbox > input[type=text]\",\n    searchForm: \"body > header > div > form\",\n  };\n  /**\n   * \u5404\u7A2E\u9801\u9762\u5224\u65B7\u8207\u6578\u64DA\u7372\u53D6\u65B9\u6CD5\u96C6\u5408\n   */\n  private readonly data = {\n    // \u5224\u65B7\u662F\u5426\u6709\u66F8\u7C4D\u4FE1\u606F\n    HasBookInfo: typeof bookinfo !== \"undefined\",\n    // \u5224\u65B7\u662F\u5426\u5728\u66F8\u67B6\u9801\u9762\n    IsBookshelf: (href: string = location.href) => {\n      if (this.data.IsTwkan) {\n        return new URL(href).pathname === \"/bookcase\";\n      } else {\n        return new URL(href).pathname === \"/modules/article/bookcase.php\";\n      }\n    },\n    // \u66F8\u7C4D\u76F8\u95DC\u64CD\u4F5C\n    Book: {\n      // \u7372\u53D6\u66F8\u7C4DID\n      GetAid: (href: string = window.location.href) => {\n        if (this.data.HasBookInfo) {\n          return bookinfo.articleid;\n        }\n        return href.split(\"/\")[4];\n      },\n      // \u7372\u53D6\u7AE0\u7BC0ID\n      GetCid: (href: string = window.location.href) => {\n        if (this.data.HasBookInfo) {\n          return bookinfo.chapterid;\n        }\n        return href.split(\"/\")[5];\n      },\n      // \u66F8\u7C4DURL\u6A21\u5F0F\n      pattern: /^\\/(txt|c|r)\\/(\\d|[a-z])+\\/(\\d|[a-z])+(\\.html)?$/m,\n      // \u5224\u65B7\u662F\u5426\u70BA\u66F8\u7C4D\u9801\u9762\n      Is: (href: string = window.location.href) => {\n        return this.data.Book.pattern.test(new URL(href).pathname);\n      },\n    },\n    // \u66F8\u7C4D\u4FE1\u606F\u76F8\u95DC\u64CD\u4F5C\n    Info: {\n      // \u66F8\u7C4D\u4FE1\u606FURL\u6A21\u5F0F\n      pattern: /^\\/(book|b|article)\\/(\\d|[a-z])+\\.htm(l)?$/m,\n      // \u5224\u65B7\u662F\u5426\u70BA\u66F8\u7C4D\u4FE1\u606F\u9801\u9762\n      Is: (pathname: string = window.location.pathname) => {\n        return this.data.Info.pattern.test(pathname);\n      },\n    },\n    // \u7D50\u675F\u9801\u9762\u76F8\u95DC\u64CD\u4F5C\n    End: {\n      // \u5224\u65B7\u662F\u5426\u70BA\u7D50\u675F\u9801\u9762\n      Is: (href: string = window.location.href) => {\n        if (this.data.Info.Is()) {\n          const searchParams = new URL(href).searchParams;\n          return searchParams.get(\"FromBook\") === \"true\";\n        }\n        if (this.data.IsTwkan) {\n          let h = new URL(href);\n          if (\n            /txt\\/\\d+\\/end\\.html/.test(h.pathname) &&\n            h.searchParams.get(\"FromBook\") === \"true\"\n          ) {\n            return true;\n          } else {\n            return false;\n          }\n        }\n        return false;\n      },\n    },\n    // \u7372\u53D6\u4E0B\u4E00\u9801URL\n    GetNextPageUrl: () => {\n      const nextPageEle = this.getNextPageElement();\n      return nextPageEle?.href;\n    },\n    // \u5224\u65B7\u4E0B\u4E00\u9801\u662F\u5426\u70BA\u7D50\u675F\u9801\u9762\n    IsNextEnd: () => {\n      if (this.data.Book.Is()) {\n        const nextUrl = this.data.GetNextPageUrl();\n        if (nextUrl) {\n          return (\n            this.data.End.Is(nextUrl) ||\n            this.data.Info.Is(new URL(nextUrl).pathname)\n          );\n        }\n      }\n      return false;\n    },\n    // \u5224\u65B7\u662F\u5426\u70BA69shu.biz\u57DF\u540D\n    IsBiz: location.host === \"69shu.biz\",\n    // \u5224\u65B7\u662F\u5426\u70BAtwkan.com\u57DF\u540D\n    IsTwkan: location.host === \"twkan.com\",\n\n    NotAny: () => {\n      return (\n        !this.data.Book.Is() &&\n        !this.data.Info.Is() &&\n        !this.data.End.Is() &&\n        !this.data.IsBookshelf()\n      );\n    },\n  };\n  i18nInstance: I18n;\n  t: typeof this.i18nInstance.t;\n\n  /**\n   * \u53D6\u5F97\u4E0B\u4E00\u9801\u7684a\u5143\u7D20\n   */\n  getNextPageElement(): HTMLAnchorElement | null {\n    for (const selector of this.SELECTORS.nextPage) {\n      const element = document.querySelector<HTMLAnchorElement>(selector);\n      if (element?.href) return element;\n    }\n    // \u5099\u7528\u65B9\u6848\uFF1A\u5C0B\u627E\u6587\u5B57\u70BA\"\u4E0B\u4E00\u7AE0\"\u7684\u9023\u7D50\n    return Array.from(document.querySelectorAll(\"a\")).find(\n      (link) => link.textContent === \"\u4E0B\u4E00\u7AE0\"\n    ) as HTMLAnchorElement | null;\n  }\n\n  /**\n   * \u69CB\u9020\u51FD\u6578\uFF0C\u6839\u64DA\u7576\u524D\u9801\u9762\u81EA\u52D5\u5206\u6D3E\u5C0D\u61C9\u8655\u7406\n   */\n  constructor() {\n    this.i18nInstance = new I18n(i18nData, config.Language.toString());\n    this.t = this.i18nInstance.t;\n\n    try {\n      if (config.Debug) {\n        console.debug(this.debugInfo());\n      }\n\n      // #tag search\n      const search = new URLSearchParams(location.search).get(\"q\");\n      if (search) this.performSearch(search);\n\n      // #tag BookEnd\n      if (this.data.End.Is()) {\n        if (config.Debug) console.log(\"End page detected\");\n        if (config.IsEndClose) window.close();\n      }\n      // #tag Book\n      if (this.data.Book.Is()) {\n        if (config.Debug) console.log(\"Book page detected\");\n        this.handleBookPage();\n      }\n      // #tag Info\n      if (this.data.Info.Is()) {\n        if (config.Debug) console.log(\"Book info page detected\");\n        let Ele = document.querySelector<HTMLAnchorElement>(\n          \"body > div.container > ul > li.col-8 > div:nth-child(2) > ul > li:nth-child(2) > a\"\n        );\n        if (Ele) {\n          Ele.click();\n        }\n      }\n      // #tag Bookshelf\n      if (this.data.IsBookshelf()) {\n        if (config.Debug) console.log(\"Bookshelf page detected\");\n        this.handleBookshelf();\n      }\n\n      // if not match any pattern\n      if (this.data.NotAny()) {\n        if (!config.Debug) {\n          alert(this.t(\"noMatchingPattern\"));\n        }\n      }\n    } catch (error) {\n      if (!config.Debug) {\n        alert(`${this.t(\"errorOccurred\")}${String(error)}`);\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * \u66F8\u9801\u81EA\u52D5\u5316\u8655\u7406\uFF1A\u6A23\u5F0F\u3001\u5C0E\u822A\u3001\u5143\u7D20\u79FB\u9664\u3001\u66F8\u6AC3\u3001\u4F5C\u8005\u9023\u7D50\u3001\u4E0B\u4E00\u9801\u93C8\u63A5\n   */\n  private handleBookPage(): void {\n    if (config.IsHookAlert) this.hookAlert();\n    this.addStyles();\n    this.modifyPageNavigation();\n    removeElement(\n      \".mytitle\",\n      \".top_Scroll\",\n      \"#pagefootermenu\",\n      \"body > div.container > div > div.yueduad1\",\n      \"#pageheadermenu\",\n      \".bottom-ad2\",\n      \"body > div.container > div.yuedutuijian.light\"\n    );\n    if (this.data.IsTwkan) {\n      removeElement(\"#container > br\");\n    }\n    if (config.AutoAddBookcase) this.autoAddToBookcase();\n    this.insertAuthorLink();\n    this.updateNextPageLink();\n    if (this.data.IsTwkan) {\n      const raw_replace_json = GM_getResourceText(\"replace_json\");\n      let replace_json: {\n        [key: string]: string;\n      } = {};\n      try {\n        replace_json = JSON.parse(raw_replace_json);\n      } catch (error) {\n        if (error instanceof SyntaxError) {\n          if (config.Debug) {\n            console.log(error);\n          } else {\n            alert(error);\n          }\n        } else {\n          throw error;\n        }\n      }\n      if (config.Debug) {\n        console.log(\"replace_json: \", replace_json);\n      }\n\n      for (const key in replace_json) {\n        if (Object.hasOwn(replace_json, key)) {\n          const element = replace_json[key];\n          if (document.querySelector<HTMLDivElement>(\"#txtcontent\")) {\n            (\n              document.querySelector<HTMLDivElement>(\n                \"#txtcontent\"\n              ) as HTMLDivElement\n            ).innerText = (\n              document.querySelector<HTMLDivElement>(\n                \"#txtcontent\"\n              ) as HTMLDivElement\n            ).innerText.replaceAll(key, element);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * \u81EA\u52D5\u52A0\u5165\u66F8\u6AC3\uFF08\u5982\u672A\u5728\u5C01\u9396\u540D\u55AE\uFF09\n   */\n  private autoAddToBookcase(): void {\n    const aid = this.data.Book.GetAid();\n    if (!config.AutoAddBookcaseBlockade.includes(aid)) {\n      this.addBookcase();\n    } else {\n      console.log(\"Book is in the blockade list, not auto adding to bookcase.\");\n    }\n  }\n\n  /**\n   * \u66F4\u65B0\u4E0B\u4E00\u9801\u93C8\u63A5\uFF0C\u9644\u52A0FromBook\u53C3\u6578\n   */\n  private updateNextPageLink(): void {\n    const nextPageEle = this.getNextPageElement();\n    if (nextPageEle) {\n      const href = new URL(nextPageEle.href);\n      href.searchParams.set(\"FromBook\", \"true\");\n      nextPageEle.href = href.toString();\n    }\n  }\n\n  /**\n   * \u6514\u622A\u5168\u5C40alert\uFF0C\u6839\u64DA\u5C01\u9396\u540D\u55AE\u904E\u6FFE\n   */\n  private hookAlert(): void {\n    const _alert: Function = alert;\n    unsafeWindow.alert = (...message: any) => {\n      if (\n        !config.HookAlertBlockade.some(\n          (blockade) =>\n            JSON.stringify(message) === JSON.stringify(blockade) ||\n            JSON.stringify(blockade) === \"*\"\n        )\n      ) {\n        _alert(...message);\n      }\n      if (config.Debug) console.log(\"Alert message:\", message);\n    };\n  }\n\n  /**\n   * \u6CE8\u5165\u81EA\u5B9A\u7FA9CSS\u6A23\u5F0F\n   */\n  private addStyles(): void {\n    const css1 = GM_getResourceText(\"css1\");\n    GM_addStyle(css1);\n    if (config.Debug) console.log(\"CSS added\");\n  }\n\n  /**\n   * \u79FB\u9664\u539F\u6709onkeydown\uFF0C\u8A3B\u518A\u81EA\u5B9A\u7FA9\u9375\u76E4\u5C0E\u822A\n   */\n  private modifyPageNavigation(): void {\n    document.onkeydown = null;\n    addEventListener(\"keydown\", this.keydownHandler.bind(this));\n  }\n\n  /**\n   * \u8655\u7406\u53F3\u9375\u5C0E\u822A\u8207\u7D50\u675F\u81EA\u52D5\u95DC\u9589\n   */\n  private keydownHandler(e: KeyboardEvent): void {\n    if (!e.repeat && e.key === \"ArrowRight\") {\n      const nextPageLink = this.data.GetNextPageUrl();\n      if (nextPageLink) {\n        let href = new URL(nextPageLink);\n        href.searchParams.set(\"FromBook\", \"true\");\n        window.location.href = href.toString();\n      }\n      if (this.data.IsNextEnd()) {\n        if (config.IsEndClose) {\n          window.close();\n        }\n      }\n    }\n  }\n\n  /**\n   * \u52A0\u5165\u66F8\u6AC3\uFF08\u6839\u64DA\u4E0D\u540C\u7AD9\u9EDE\u547C\u53EB\u4E0D\u540CAPI\u6216\u6A21\u64EC\u9EDE\u64CA\uFF09\n   */\n  private addBookcase(): void {\n    const aid = this.data.Book.GetAid();\n    const cid = this.data.Book.GetCid();\n    if (!addbookcase.toString().includes(\"Ajax.Tip\")) {\n      addbookcase(aid, cid);\n    } else {\n      const addBookcaseLink =\n        document.querySelector<HTMLElement>(\"#a_addbookcase\");\n      addBookcaseLink?.click();\n    }\n  }\n\n  /**\n   * \u66FF\u63DB\u6A19\u984Cdiv\u70BA\u5E36\u6709\u4F5C\u8005\u9023\u7D50\u7684\u65B0\u5143\u7D20\n   */\n  private insertAuthorLink(): void {\n    let author;\n    if (!bookinfo) {\n      author =\n        document\n          .querySelector(this.SELECTORS.authorInfo)\n          ?.textContent?.trim()\n          .split(\" \")[1] ?? \"undefined\";\n    } else {\n      author = bookinfo.author;\n    }\n    const titleDiv = document.querySelector(\n      this.SELECTORS.titleDiv\n    ) as HTMLDivElement;\n    if (titleDiv) {\n      const titleLink = this.createTitleLink();\n      titleDiv.parentNode?.replaceChild(titleLink, titleDiv);\n    }\n    const authorLink = this.createAuthorLink(author);\n    let oal = document.querySelector(\n      \"#container > div.mybox > div > div.txtinfo.hide720 > span:nth-child(2)\"\n    );\n    if (oal === null) {\n      console.warn(\"insertAuthorLink:oal=null\");\n      return void 0;\n    }\n    document\n      .querySelector(\n        \"#container > div.mybox > div.txtnav > div.txtinfo.hide720\"\n      )\n      ?.replaceChild(authorLink, oal);\n  }\n\n  /**\n   * \u5EFA\u7ACB\u4F5C\u8005\u9801\u9762\u9023\u7D50\u5143\u7D20\n   */\n  private createAuthorLink(author: string): HTMLAnchorElement {\n    const authorLink = document.createElement(\"a\");\n    if (this.data.IsTwkan) {\n      authorLink.href = `https://twkan.com/author/${author}.html`;\n    } else {\n      authorLink.href = `${\n        window.location.origin\n      }/modules/article/author.php?author=${encodeURIComponent(author)}`;\n    }\n    authorLink.textContent = \"\u4F5C\u8005\uFF1A \" + author;\n    authorLink.style.color = \"#007ead\";\n    return authorLink;\n  }\n\n  /**\n   * \u5EFA\u7ACB\u66F8\u540D\u9023\u7D50\u5143\u7D20\n   */\n  private createTitleLink(): HTMLAnchorElement {\n    const titleLink = document.createElement(\"a\");\n    titleLink.innerHTML = this.data.HasBookInfo\n      ? bookinfo.articlename ?? document.title.split(\"-\")[0]\n      : document.title.split(\"-\")[0];\n    titleLink.classList.add(\"userjs_add\");\n    titleLink.id = \"title\";\n    titleLink.href = `${window.location.origin}/${\n      this.data.IsBiz ? \"b\" : \"book\"\n    }/${this.data.Book.GetAid()}.${\n      this.data.IsBiz || this.data.IsTwkan ? \"html\" : \"htm\"\n    }`;\n    return titleLink;\n  }\n\n  /**\n   * \u66F8\u67B6\u9801\u9762\uFF1A\u6536\u96C6\u66F8\u7C4D\u8CC7\u6599\u4E26\u8A3B\u518A\u83DC\u55AE\n   */\n  private async handleBookshelf(): Promise<void> {\n    const bookData = await this.collectBookData();\n    if (config.Debug) console.log(\"Bookshelf data collected\", bookData);\n    this.registerMenuCommand(bookData);\n  }\n\n  /**\n   * \u641C\u5C0B\u529F\u80FD\uFF1A\u81EA\u52D5\u586B\u5165\u4E26\u63D0\u4EA4\u8868\u55AE\n   */\n  private performSearch(search: string): void {\n    const searchInput = document.querySelector(\n      this.SELECTORS.searchInput\n    ) as HTMLInputElement;\n    const searchForm = document.querySelector(\n      this.SELECTORS.searchForm\n    ) as HTMLFormElement;\n    if (searchInput && searchForm) {\n      searchInput.value = search;\n      searchForm.submit();\n    }\n  }\n\n  /**\n   * \u905E\u8FF4\u6536\u96C6\u66F8\u67B6\u66F8\u7C4D\u8CC7\u6599\uFF0C\u6700\u591A\u91CD\u8A665\u6B21\n   */\n  private async collectBookData(retryCount: number = 0): Promise<BookData[]> {\n    const books: Array<BookData> = [];\n    const labels = document.querySelectorAll(\"[id^='book_']\");\n    if (config.Debug) console.groupCollapsed(\"collectBookData\");\n    if (labels.length === 0) {\n      if (retryCount <= 5) {\n        console.warn(this.t(\"noLabelsFound\"));\n        await new Promise((resolve) => setTimeout(resolve, 5000));\n        return this.collectBookData(retryCount + 1);\n      } else {\n        console.error(this.t(\"maxRetriesReached\"));\n        return []; // \u5230\u9054\u6700\u5927\u91CD\u8A66\u6B21\u6578, \u8FD4\u56DE\u7A7A\u9663\u5217\n      }\n    }\n    if (config.Debug) {\n      console.log(labels);\n    }\n    labels.forEach((label) => {\n      const bookContainer = label;\n\n      const tmp = (function () {\n        if (\n          Array.from(label.querySelectorAll(\"label\")).find(\n            (label2) => label2.textContent === \"\u66F4\u65B0\"\n          )\n        ) {\n          const bookContinueEle = label.querySelector(\n            \"div.newright > a.btn.btn-tp\"\n          ) as HTMLAnchorElement;\n          const bookContinueLink = bookContinueEle.href;\n\n          const BookName = label.querySelector<HTMLSpanElement>(\n            \"div.newnav > h3 > a > span\"\n          )?.textContent as string;\n\n          const bookImgEle = label.querySelector(\"a > img\") as HTMLImageElement;\n          const bookImgUrl = bookImgEle.src;\n          // }\n          return { bookContinueLink, BookName, bookImgUrl };\n        } else {\n          return false;\n        }\n      })();\n      if (tmp) {\n        const { bookContinueLink, BookName, bookImgUrl } = tmp;\n\n        const push_data: BookData = {\n          Updata: {\n            url: {\n              value: bookContinueLink,\n              URLParams: new URLSearchParams(bookContinueLink),\n            },\n          },\n          Mate: {\n            BookName: BookName,\n            BookHtmlObj: bookContainer,\n            BookImgUrl: bookImgUrl,\n          },\n        };\n        if (config.Debug) {\n          console.group(push_data.Mate.BookName);\n          console.log(push_data.Mate);\n          console.table(push_data.Updata);\n          console.groupEnd();\n        }\n\n        books.push(push_data);\n      }\n    });\n    if (config.Debug) console.groupEnd();\n    return books;\n  }\n\n  /**\n   * \u8A3B\u518A\u83DC\u55AE\u547D\u4EE4\uFF0C\u9EDE\u64CA\u53EF\u6279\u91CF\u6253\u958B\u6240\u6709\u66F4\u65B0\u66F8\u7C4D\n   */\n  private registerMenuCommand(bookData: BookData[]) {\n    GM_registerMenuCommand(\n      `${\n        bookData.length === 0\n          ? this.t(\"noUpdates\")\n          : `${bookData.length}${this.t(\"updatesAvailable\")}`\n      }`,\n      () => {\n        bookData.forEach((data) => {\n          GM_openInTab(data.Updata.url.value);\n        });\n      }\n    );\n  }\n\n  /**\n   * \u8F38\u51FA\u8ABF\u8A66\u8CC7\u8A0A\n   */\n  private debugInfo() {\n    return {\n      IsBook: this.data.Book.Is(),\n      IsInfo: this.data.Info.Is(),\n      IsEnd: this.data.End.Is(),\n      IsNextEnd: this.data.IsNextEnd(),\n      IsBookshelf: this.data.IsBookshelf(),\n      HasBookinfo: this.data.HasBookInfo,\n      IsBiz: this.data.IsBiz,\n      IsTwkan: this.data.IsTwkan,\n      ...config,\n    };\n  }\n}\n\n// \u521D\u59CB\u5316\u66F8\u7C4D\u7BA1\u7406\u5668\nconst bookManager = new BookManager();\n"],
  "mappings": "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",
  "names": ["require_shuba_auto_user", "__commonJSMin", "Language", "Config", "key", "value", "menu", "lang", "config", "i18nData", "BookManager", "href", "pathname", "h", "nextUrl", "selector", "element", "link", "search", "Ele", "error", "raw_replace_json", "replace_json", "aid", "nextPageEle", "_alert", "message", "blockade", "css1", "nextPageLink", "cid", "author", "titleDiv", "titleLink", "authorLink", "oal", "bookData", "searchInput", "searchForm", "retryCount", "books", "labels", "resolve", "label", "bookContainer", "tmp", "label2", "bookContinueLink", "BookName", "bookImgUrl", "push_data", "data", "bookManager"]
}
