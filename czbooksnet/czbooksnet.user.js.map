{"version":3,"sources":["czbooksnet.user.ts"],"sourcesContent":["/// <reference path = \"./../Tools/Tools.user.d.ts\"/>\n// ==UserScript==\n// @name         czbooks.net\n// @namespace    pl816098\n// @version      1.1.11.0\n// @description  自用\n// @author       pl816098\n// @match        https://czbooks.net/n/*/*\n// @icon         https://www.google.com/s2/favicons?sz=64&domain=czbooks.net\n// @grant        GM_addStyle\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_registerMenuCommand\n// @grant        GM_getResourceText\n// @license      MIT\n//#if debug\n// #@require file://C:\\Users\\p\\Documents\\git\\userjs\\Tools\\Tools.user.js\n//#else\n// @require https://github.com/Paul-16098/userjs/raw/dev/Tools/Tools.user.js\n//#endif\n// @resource     css1 https://github.com/Paul-16098/userjs/raw/refs/heads/dev/czbooksnet/czbooksnet.css\n// @supportURL   https://github.com/Paul-16098/userjs/issues/\n// @homepageURL  https://github.com/Paul-16098/userjs/\n// ==/UserScript==\n/**\n * 取得並注入自定義CSS樣式\n */\nlet css1 = GM_getResourceText(\"css1\");\nGM_addStyle(css1);\n\n/**\n * 移除頁面不需要的元素，提升閱讀體驗\n */\nremoveElement(\n  \"body > div.header\",\n  \"body > div.footer\",\n  \"body > div.main > div:nth-child(3)\",\n  \"#go-to-top\",\n  \"#sticky-parent > div.chapter-detail > div.notice\"\n);\n\n/**\n * 判斷是否為深色模式\n * @type {boolean}\n */\nconst isDarkMode =\n  window.matchMedia &&\n  window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n\n/**\n * 切換背景主題（預設/白色）\n * @param params - \"default\" 為深色，\"white\" 為淺色\n */\nif (!changeBackground || typeof changeBackground !== \"function\") {\n  function changeBackground(params: \"default\" | \"white\") {\n    switch (params) {\n      case \"default\": {\n        // 點擊預設主題按鈕\n        (\n          document.querySelector(\n            \"#sticky-parent > div.chapter-detail > div.customs-function > ul:nth-child(2) > li:nth-child(2) > a\"\n          ) as HTMLAnchorElement\n        ).click();\n        break;\n      }\n      case \"white\": {\n        // 點擊白色主題按鈕\n        (\n          document.querySelector(\n            \"#sticky-parent > div.chapter-detail > div.customs-function > ul:nth-child(2) > li:nth-child(3) > a\"\n          ) as HTMLAnchorElement\n        ).click();\n        break;\n      }\n    }\n  }\n}\n\n// 根據系統主題自動切換背景\nif (isDarkMode) {\n  changeBackground(\"default\");\n} else {\n  changeBackground(\"white\");\n}\n\n/**\n * 監聽系統主題變化，自動切換背景\n */\nwindow\n  .matchMedia(\"(prefers-color-scheme: dark)\")\n  .addEventListener(\"change\", (e) => {\n    if (e.matches) {\n      changeBackground(\"default\");\n    } else {\n      changeBackground(\"white\");\n    }\n  });\n"],"names":["css1","GM_getResourceText","GM_addStyle","removeElement","isDarkMode","window","matchMedia","matches","changeBackground","params","document","querySelector","click","addEventListener","e"],"mappings":"AAAA,oDAAoD;AACpD,iBAAiB;AACjB,4BAA4B;AAC5B,yBAAyB;AACzB,yBAAyB;AACzB,mBAAmB;AACnB,yBAAyB;AACzB,0CAA0C;AAC1C,4EAA4E;AAC5E,4BAA4B;AAC5B,4BAA4B;AAC5B,4BAA4B;AAC5B,uCAAuC;AACvC,mCAAmC;AACnC,oBAAoB;AACpB,WAAW;AACX,uEAAuE;AACvE,OAAO;AACP,4EAA4E;AAC5E,QAAQ;AACR,uGAAuG;AACvG,6DAA6D;AAC7D,sDAAsD;AACtD,kBAAkB;AAClB;;CAEC,eACD,IAAIA,KAAOC,mBAAmB,QAC9BC,YAAYF,KAEZ;;CAEC,EACDG,cACE,oBACA,oBACA,qCACA,aACA,mDAGF;;;CAGC,EACD,MAAMC,WACJC,OAAOC,UAAU,EACjBD,OAAOC,UAAU,CAAC,gCAAgCC,OAAO,AAE3D;;;CAGC,EACD,GAAI,CAACC,kBAAoB,OAAOA,mBAAqB,WAAY,CAC/D,SAASA,kBAAiBC,MAA2B,EACnD,OAAQA,QACN,IAAK,UAAW,CAEd,AADA,WAAW;AAETC,SAASC,aAAa,CACpB,sGAEFC,KAAK,GACP,KACF,CACA,IAAK,QAAS,CAEZ,AADA,WAAW;AAETF,SAASC,aAAa,CACpB,sGAEFC,KAAK,GACP,KACF,CACF,CACF,CACF,CAEA,eAAe;AACf,GAAIR,WAAY,CACdI,iBAAiB,UACnB,KAAO,CACLA,iBAAiB,QACnB,CAEA;;CAEC,EACDH,OACGC,UAAU,CAAC,gCACXO,gBAAgB,CAAC,SAAU,AAACC,IAC3B,GAAIA,EAAEP,OAAO,CAAE,CACbC,iBAAiB,UACnB,KAAO,CACLA,iBAAiB,QACnB,CACF"}