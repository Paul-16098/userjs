{"version":3,"sources":["czbooksnet.user.ts"],"sourcesContent":["/// <reference path = \"./../Tools/Tools.user.d.ts\"/>\r\n// ==UserScript==\r\n// @name         czbooks.net\r\n// @namespace    pl816098\r\n// @version      1.1.11.0\r\n// @description  自用\r\n// @author       pl816098\r\n// @match        https://czbooks.net/n/*/*\r\n// @icon         https://www.google.com/s2/favicons?sz=64&domain=czbooks.net\r\n// @grant        GM_addStyle\r\n// @grant        GM_getValue\r\n// @grant        GM_setValue\r\n// @grant        GM_registerMenuCommand\r\n// @grant        GM_getResourceText\r\n// @license      MIT\r\n//#if debug\r\n// #@require file://C:\\Users\\p\\Documents\\git\\userjs\\Tools\\Tools.user.js\r\n//#else\r\n// @require https://github.com/Paul-16098/userjs/raw/dev/Tools/Tools.user.js\r\n//#endif\r\n// @resource     css1 https://github.com/Paul-16098/userjs/raw/refs/heads/dev/czbooksnet/czbooksnet.css\r\n// @supportURL   https://github.com/Paul-16098/userjs/issues/\r\n// @homepageURL  https://github.com/Paul-16098/userjs/\r\n// ==/UserScript==\r\n/**\r\n * 取得並注入自定義CSS樣式\r\n */\r\nlet css1 = GM_getResourceText(\"css1\");\r\nGM_addStyle(css1);\r\n\r\n/**\r\n * 移除頁面不需要的元素，提升閱讀體驗\r\n */\r\nremoveElement(\r\n  \"body > div.header\",\r\n  \"body > div.footer\",\r\n  \"body > div.main > div:nth-child(3)\",\r\n  \"#go-to-top\",\r\n  \"#sticky-parent > div.chapter-detail > div.notice\"\r\n);\r\n\r\n/**\r\n * 判斷是否為深色模式\r\n * @type {boolean}\r\n */\r\nconst isDarkMode =\r\n  window.matchMedia &&\r\n  window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\r\n\r\n/**\r\n * 切換背景主題（預設/白色）\r\n * @param params - \"default\" 為深色，\"white\" 為淺色\r\n */\r\nif (!changeBackground || typeof changeBackground !== \"function\") {\r\n  function changeBackground(params: \"default\" | \"white\") {\r\n    switch (params) {\r\n      case \"default\": {\r\n        // 點擊預設主題按鈕\r\n        (\r\n          document.querySelector(\r\n            \"#sticky-parent > div.chapter-detail > div.customs-function > ul:nth-child(2) > li:nth-child(2) > a\"\r\n          ) as HTMLAnchorElement\r\n        ).click();\r\n        break;\r\n      }\r\n      case \"white\": {\r\n        // 點擊白色主題按鈕\r\n        (\r\n          document.querySelector(\r\n            \"#sticky-parent > div.chapter-detail > div.customs-function > ul:nth-child(2) > li:nth-child(3) > a\"\r\n          ) as HTMLAnchorElement\r\n        ).click();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 根據系統主題自動切換背景\r\nif (isDarkMode) {\r\n  changeBackground(\"default\");\r\n} else {\r\n  changeBackground(\"white\");\r\n}\r\n\r\n/**\r\n * 監聽系統主題變化，自動切換背景\r\n */\r\nwindow\r\n  .matchMedia(\"(prefers-color-scheme: dark)\")\r\n  .addEventListener(\"change\", (e) => {\r\n    if (e.matches) {\r\n      changeBackground(\"default\");\r\n    } else {\r\n      changeBackground(\"white\");\r\n    }\r\n  });\r\n"],"names":["css1","GM_getResourceText","GM_addStyle","removeElement","isDarkMode","window","matchMedia","matches","changeBackground","params","document","querySelector","click","addEventListener","e"],"mappings":"AAAA,oDAAoD;AACpD,iBAAiB;AACjB,4BAA4B;AAC5B,yBAAyB;AACzB,yBAAyB;AACzB,mBAAmB;AACnB,yBAAyB;AACzB,0CAA0C;AAC1C,4EAA4E;AAC5E,4BAA4B;AAC5B,4BAA4B;AAC5B,4BAA4B;AAC5B,uCAAuC;AACvC,mCAAmC;AACnC,oBAAoB;AACpB,WAAW;AACX,uEAAuE;AACvE,OAAO;AACP,4EAA4E;AAC5E,QAAQ;AACR,uGAAuG;AACvG,6DAA6D;AAC7D,sDAAsD;AACtD,kBAAkB;AAClB;;CAEC,eACD,IAAIA,KAAOC,mBAAmB,QAC9BC,YAAYF,KAEZ;;CAEC,EACDG,cACE,oBACA,oBACA,qCACA,aACA,mDAGF;;;CAGC,EACD,MAAMC,WACJC,OAAOC,UAAU,EACjBD,OAAOC,UAAU,CAAC,gCAAgCC,OAAO,AAE3D;;;CAGC,EACD,GAAI,CAACC,kBAAoB,OAAOA,mBAAqB,WAAY,CAC/D,SAASA,kBAAiBC,MAA2B,EACnD,OAAQA,QACN,IAAK,UAAW,CAEd,AADA,WAAW;AAETC,SAASC,aAAa,CACpB,sGAEFC,KAAK,GACP,KACF,CACA,IAAK,QAAS,CAEZ,AADA,WAAW;AAETF,SAASC,aAAa,CACpB,sGAEFC,KAAK,GACP,KACF,CACF,CACF,CACF,CAEA,eAAe;AACf,GAAIR,WAAY,CACdI,iBAAiB,UACnB,KAAO,CACLA,iBAAiB,QACnB,CAEA;;CAEC,EACDH,OACGC,UAAU,CAAC,gCACXO,gBAAgB,CAAC,SAAU,AAACC,IAC3B,GAAIA,EAAEP,OAAO,CAAE,CACbC,iBAAiB,UACnB,KAAO,CACLA,iBAAiB,QACnB,CACF"}